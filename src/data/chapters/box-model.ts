import type { Section } from '../modules';
import type { GlossaryEntry } from '../glossary';
import type { PropertyEntry } from '../properties';

export const sections: Section[] = [
  {
    id: 'intro',
    number: '1',
    title: { zh: '简介', en: 'Introduction' },
    specId: 'intro',
    summary: {
      zh: 'CSS 将元素树转换为一组盒子,每个盒子有矩形的内容区域,以及可选的 padding、border 和 margin 区域。',
      en: 'CSS transforms the element tree into a set of boxes, each with a rectangular content area and optional padding, border, and margin areas.',
    },
    keyPoints: [
      '元素树(element tree)被转换为盒子树(box tree)',
      '每个盒子有 content、padding、border、margin 四个区域',
      'sizing 属性决定内容区域大小,box styling 属性决定其他区域大小',
      '本模块仅定义物理方向(top/right/bottom/left)的属性,逻辑方向属性在 css-logical-1 中定义',
    ],
  },
  {
    id: 'box-model',
    number: '2',
    title: { zh: '盒模型', en: 'The CSS Box Model' },
    specId: 'box-model',
    summary: {
      zh: '每个盒子有 content area 及可选的 padding、border、margin 区域。各区域大小由对应属性控制,margin 可以为负值。',
      en: 'Each box has a content area and optional padding, border, and margin areas. Each area size is controlled by corresponding properties; margin can be negative.',
    },
    keyPoints: [
      'content、padding、border 的背景由 background 属性控制',
      'margin 始终是透明的',
      '四种边缘:content edge(内边缘)、padding edge、border edge、margin edge(外边缘)',
      '四种盒子:content-box、padding-box、border-box、margin-box',
      'box-edge 关键字可用于 transform-box、background-clip 等属性',
    ],
  },
  {
    id: 'margins',
    number: '3',
    title: { zh: '外边距', en: 'Margins' },
    specId: 'margins',
    summary: {
      zh: 'Margin 在 border edge 外围提供盒子之间的间距。支持 margin-top/right/bottom/left 和 margin 简写。',
      en: 'Margin provides spacing between boxes outside the border edge. Supports margin-top/right/bottom/left and margin shorthand.',
    },
    keyPoints: [
      'margin 初始值为 0,不可继承',
      '允许负值(但可能有实现限制)',
      '百分比相对于包含块的逻辑宽度',
      '不适用于 internal table elements',
      'block layout 中相邻的 margin 会发生折叠(collapsing)',
      '简写 margin 的 1-4 个值分别对应不同方向的写法',
    ],
  },
  {
    id: 'paddings',
    number: '4',
    title: { zh: '内边距', en: 'Padding' },
    specId: 'paddings',
    summary: {
      zh: 'Padding 在 content edge 和 padding edge 之间提供间距。支持 padding-top/right/bottom/left 和 padding 简写。',
      en: 'Padding provides spacing between content edge and padding edge. Supports padding-top/right/bottom/left and padding shorthand.',
    },
    keyPoints: [
      'padding 初始值为 0,不可继承',
      '不允许负值',
      '百分比相对于包含块的逻辑宽度',
      '背景默认绘制到 padding edge,可通过 background-origin/background-clip 调整',
      '简写 padding 的值语法与 margin 相同',
    ],
  },
  {
    id: 'borders',
    number: '5',
    title: { zh: '边框', en: 'Borders' },
    specId: 'borders',
    summary: {
      zh: 'Border 填充 border area,用于可视化标记盒子的边缘。边框属性包括宽度、样式和颜色,定义在 css-backgrounds-3 中。',
      en: 'Border fills the border area, used to visually mark the edges of boxes. Border properties including width, style, and color are defined in css-backgrounds-3.',
    },
    keyPoints: [
      '边框属性(width、style、color)定义在 CSS Backgrounds and Borders 模块中',
      '逻辑方向的边框属性定义在 css-logical-1 中',
      'border area 位于 padding edge 和 border edge 之间',
    ],
  },
];

export const anchors: Record<string, string> = {
  'box-dimensions': 'box-model',
  'mpb-examples': 'margins',
  'collapsing-margins': 'margins',
  'bidi-box-model': 'box-model',
};

// ============================================================
// 属性定义（CSS2.2 Ch8 Box Model）
// ============================================================

const BOX = 'https://www.w3.org/TR/CSS22/box.html';
const BOX3 = 'https://www.w3.org/TR/css-box-3/';
const BG3 = 'https://www.w3.org/TR/css-backgrounds-3/';
const APPLIES_MARGIN = '除 table-caption、table、inline-table 之外的 table 显示类型元素外的所有元素';
const APPLIES_PADDING = '除 table-row-group、table-header-group、table-footer-group、table-row、table-column-group、table-column 外的所有元素';

export const propertyTerms: Record<string, PropertyEntry> = {
  // ── margin ──
  'margin-top': {
    zh: '上外边距',
    value: '<margin-width> | inherit',
    initial: '0',
    appliesTo: APPLIES_MARGIN,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '指定的百分比或绝对长度',
    css2Url: `${BOX}#propdef-margin-top`,
    css3Url: BOX3,
    sectionRef: 'box-model#margins',
  },
  'margin-right': {
    zh: '右外边距',
    value: '<margin-width> | inherit',
    initial: '0',
    appliesTo: APPLIES_MARGIN,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '指定的百分比或绝对长度',
    css2Url: `${BOX}#propdef-margin-right`,
    css3Url: BOX3,
    sectionRef: 'box-model#margins',
  },
  'margin-bottom': {
    zh: '下外边距',
    value: '<margin-width> | inherit',
    initial: '0',
    appliesTo: APPLIES_MARGIN,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '指定的百分比或绝对长度',
    css2Url: `${BOX}#propdef-margin-bottom`,
    css3Url: BOX3,
    sectionRef: 'box-model#margins',
  },
  'margin-left': {
    zh: '左外边距',
    value: '<margin-width> | inherit',
    initial: '0',
    appliesTo: APPLIES_MARGIN,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '指定的百分比或绝对长度',
    css2Url: `${BOX}#propdef-margin-left`,
    css3Url: BOX3,
    sectionRef: 'box-model#margins',
  },
  'margin': {
    zh: '外边距（简写）',
    value: '<margin-width>{1,4} | inherit',
    initial: '见各子属性',
    appliesTo: APPLIES_MARGIN,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-margin`,
    css3Url: BOX3,
    sectionRef: 'box-model#margins',
  },

  // ── padding ──
  'padding-top': {
    zh: '上内边距',
    value: '<padding-width> | inherit',
    initial: '0',
    appliesTo: APPLIES_PADDING,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '指定的百分比或绝对长度',
    css2Url: `${BOX}#propdef-padding-top`,
    css3Url: BOX3,
    sectionRef: 'box-model#paddings',
  },
  'padding-right': {
    zh: '右内边距',
    value: '<padding-width> | inherit',
    initial: '0',
    appliesTo: APPLIES_PADDING,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '指定的百分比或绝对长度',
    css2Url: `${BOX}#propdef-padding-right`,
    css3Url: BOX3,
    sectionRef: 'box-model#paddings',
  },
  'padding-bottom': {
    zh: '下内边距',
    value: '<padding-width> | inherit',
    initial: '0',
    appliesTo: APPLIES_PADDING,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '指定的百分比或绝对长度',
    css2Url: `${BOX}#propdef-padding-bottom`,
    css3Url: BOX3,
    sectionRef: 'box-model#paddings',
  },
  'padding-left': {
    zh: '左内边距',
    value: '<padding-width> | inherit',
    initial: '0',
    appliesTo: APPLIES_PADDING,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '指定的百分比或绝对长度',
    css2Url: `${BOX}#propdef-padding-left`,
    css3Url: BOX3,
    sectionRef: 'box-model#paddings',
  },
  'padding': {
    zh: '内边距（简写）',
    value: '<padding-width>{1,4} | inherit',
    initial: '见各子属性',
    appliesTo: APPLIES_PADDING,
    inherited: false,
    percentages: '相对于包含块的宽度',
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-padding`,
    css3Url: BOX3,
    sectionRef: 'box-model#paddings',
  },

  // ── border-width ──
  'border-top-width': {
    zh: '上边框宽度',
    value: '<border-width> | inherit',
    initial: 'medium',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: "绝对长度；border-style 为 'none' 或 'hidden' 时为 0",
    css2Url: `${BOX}#propdef-border-top-width`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-right-width': {
    zh: '右边框宽度',
    value: '<border-width> | inherit',
    initial: 'medium',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: "绝对长度；border-style 为 'none' 或 'hidden' 时为 0",
    css2Url: `${BOX}#propdef-border-right-width`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-bottom-width': {
    zh: '下边框宽度',
    value: '<border-width> | inherit',
    initial: 'medium',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: "绝对长度；border-style 为 'none' 或 'hidden' 时为 0",
    css2Url: `${BOX}#propdef-border-bottom-width`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-left-width': {
    zh: '左边框宽度',
    value: '<border-width> | inherit',
    initial: 'medium',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: "绝对长度；border-style 为 'none' 或 'hidden' 时为 0",
    css2Url: `${BOX}#propdef-border-left-width`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-width': {
    zh: '边框宽度（简写）',
    value: '<border-width>{1,4} | inherit',
    initial: '见各子属性',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-border-width`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },

  // ── border-color ──
  'border-top-color': {
    zh: '上边框颜色',
    value: '<color> | transparent | inherit',
    initial: "color 属性的值",
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: "取自 color 属性时为 color 的计算值；否则为指定值",
    css2Url: `${BOX}#propdef-border-top-color`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-right-color': {
    zh: '右边框颜色',
    value: '<color> | transparent | inherit',
    initial: "color 属性的值",
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: "取自 color 属性时为 color 的计算值；否则为指定值",
    css2Url: `${BOX}#propdef-border-right-color`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-bottom-color': {
    zh: '下边框颜色',
    value: '<color> | transparent | inherit',
    initial: "color 属性的值",
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: "取自 color 属性时为 color 的计算值；否则为指定值",
    css2Url: `${BOX}#propdef-border-bottom-color`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-left-color': {
    zh: '左边框颜色',
    value: '<color> | transparent | inherit',
    initial: "color 属性的值",
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: "取自 color 属性时为 color 的计算值；否则为指定值",
    css2Url: `${BOX}#propdef-border-left-color`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-color': {
    zh: '边框颜色（简写）',
    value: '[ <color> | transparent ]{1,4} | inherit',
    initial: '见各子属性',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-border-color`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },

  // ── border-style ──
  'border-top-style': {
    zh: '上边框样式',
    value: '<border-style> | inherit',
    initial: 'none',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '指定值',
    css2Url: `${BOX}#propdef-border-top-style`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-right-style': {
    zh: '右边框样式',
    value: '<border-style> | inherit',
    initial: 'none',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '指定值',
    css2Url: `${BOX}#propdef-border-right-style`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-bottom-style': {
    zh: '下边框样式',
    value: '<border-style> | inherit',
    initial: 'none',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '指定值',
    css2Url: `${BOX}#propdef-border-bottom-style`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-left-style': {
    zh: '左边框样式',
    value: '<border-style> | inherit',
    initial: 'none',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '指定值',
    css2Url: `${BOX}#propdef-border-left-style`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-style': {
    zh: '边框样式（简写）',
    value: '<border-style>{1,4} | inherit',
    initial: '见各子属性',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-border-style`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },

  // ── border shorthand ──
  'border-top': {
    zh: '上边框（简写）',
    value: '<border-width> || <border-style> || <color> | inherit',
    initial: '见各子属性',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-border-top`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-right': {
    zh: '右边框（简写）',
    value: '<border-width> || <border-style> || <color> | inherit',
    initial: '见各子属性',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-border-right`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-bottom': {
    zh: '下边框（简写）',
    value: '<border-width> || <border-style> || <color> | inherit',
    initial: '见各子属性',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-border-bottom`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border-left': {
    zh: '左边框（简写）',
    value: '<border-width> || <border-style> || <color> | inherit',
    initial: '见各子属性',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-border-left`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
  'border': {
    zh: '边框（简写）',
    value: '<border-width> || <border-style> || <color> | inherit',
    initial: '见各子属性',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '见各子属性',
    css2Url: `${BOX}#propdef-border`,
    css3Url: BG3,
    sectionRef: 'box-model#borders',
  },
};

// ============================================================
// 术语表
// ============================================================

export const glossaryTerms: Record<string, GlossaryEntry> = {
  'content area': {
    zh: '内容区域',
    description: '盒模型最内层的矩形区域,包含元素的实际内容(文本、图片等),大小由 width/height 属性控制。',
    sectionRef: 'box-model#box-model',
  },
  'padding area': {
    zh: '内边距区域',
    description: '内容区域和边框之间的空间,由 padding 属性控制。背景会延伸到内边距区域。',
    sectionRef: 'box-model#paddings',
  },
  'border area': {
    zh: '边框区域',
    description: '内边距和外边距之间的区域,由 border 属性控制宽度、样式和颜色。',
    sectionRef: 'box-model#borders',
  },
  'margin area': {
    zh: '外边距区域',
    description: '盒子最外层的透明区域,用于创建元素之间的间距。margin 可以为负值。',
    sectionRef: 'box-model#margins',
  },
  'margin collapsing': {
    zh: '外边距折叠',
    description: '垂直方向上相邻的 margin 会合并为一个(取较大值),而非叠加。这是 block layout 的特殊行为。',
    sectionRef: 'box-model#margins',
  },
  'content edge': {
    zh: '内容边缘',
    description: '内容区域的边界,即 content area 的外边缘。',
    sectionRef: 'box-model#box-model',
  },
  'padding edge': {
    zh: '内边距边缘',
    description: '内边距区域的外边界,即 padding area 的外边缘。也称为内边距框的边。',
    sectionRef: 'box-model#paddings',
  },
  'border edge': {
    zh: '边框边缘',
    description: '边框区域的外边界,即 border area 的外边缘。',
    sectionRef: 'box-model#borders',
  },
  'margin edge': {
    zh: '外边距边缘',
    description: '外边距区域的外边界,即 margin area 的外边缘,也是盒子占用空间的最外层。',
    sectionRef: 'box-model#margins',
  },
  'inner edge': {
    zh: '内边缘',
    description: '内容区域的边界,等同于 content edge。',
    sectionRef: 'box-model#box-model',
  },
  'outer edge': {
    zh: '外边缘',
    description: '外边距区域的边界,等同于 margin edge,是盒子在布局中占据空间的最外层。',
    sectionRef: 'box-model#margins',
  },
  'content box': {
    zh: '内容框',
    description: '由 content edge 围成的矩形区域,包含元素的实际内容。box-sizing: content-box 的参考框。',
    sectionRef: 'box-model#box-model',
  },
  'padding box': {
    zh: '内边距框',
    description: '由 padding edge 围成的矩形区域,包含内容和内边距。background-origin 的默认参考框。',
    sectionRef: 'box-model#paddings',
  },
  'border box': {
    zh: '边框框',
    description: '由 border edge 围成的矩形区域。box-sizing: border-box 的参考框,也是 background-clip 的默认裁剪区域。',
    sectionRef: 'box-model#borders',
  },
  'margin box': {
    zh: '外边距框',
    description: '由 margin edge 围成的矩形区域。盒子在流式布局中实际占据的完整空间。',
    sectionRef: 'box-model#margins',
  },
  'content-box': {
    zh: '内容框(值)',
    description: 'box-sizing 属性的值之一。宽高只包含内容区域,padding 和 border 额外增加尺寸。CSS2 的默认行为。',
    sectionRef: 'box-model#box-model',
  },
  'border-box': {
    zh: '边框框(值)',
    description: 'box-sizing 属性的值之一。宽高包含内容、内边距和边框,让尺寸计算更直观。',
    sectionRef: 'box-model#box-model',
  },
  'margin properties': {
    zh: '外边距属性',
    description: 'margin-top、margin-right、margin-bottom、margin-left 及简写 margin。控制盒子外部的空间。',
    sectionRef: 'box-model#margins',
  },
  'padding properties': {
    zh: '内边距属性',
    description: 'padding-top、padding-right、padding-bottom、padding-left 及简写 padding。控制内容与边框之间的空间。',
    sectionRef: 'box-model#paddings',
  },
  'border properties': {
    zh: '边框属性',
    description: 'border-width、border-style、border-color 及相关简写属性。控制盒子边框的外观。',
    sectionRef: 'box-model#borders',
  },
};
