import type { Section } from '../modules';
import type { GlossaryEntry } from '../glossary';
import type { PropertyEntry } from '../properties';
import type { TutorialBlock } from '../modules';

export const sections: Section[] = [
  {
    id: 'text-indent-align',
    number: '1',
    title: { zh: '缩进与对齐', en: 'Indentation and Alignment' },
    specId: 'text-indent-align',
    summary: {
      zh: 'text-indent 控制块容器首行的缩进量,text-align 控制行内内容的水平对齐方式。CSS3 新增 text-align-last 和 text-justify 提供更精细的对齐控制。',
      en: 'text-indent controls the indentation of the first line of a block container, while text-align controls the horizontal alignment of inline content. CSS3 adds text-align-last and text-justify for finer alignment control.',
    },
    keyPoints: [
      'text-indent 可使用长度或百分比,支持负值实现悬挂缩进',
      'text-align 支持 left/right/center/justify 四种基本对齐',
      'CSS3: text-align 新增 start/end 值,根据书写方向自动映射到 left 或 right',
      'CSS3: text-indent 新增 hanging 关键字,反转缩进(首行以外的行缩进)',
      'CSS3: text-indent 新增 each-line 关键字,使缩进应用于每个强制换行后的首行',
      'CSS3: text-align-last 单独控制最后一行的对齐',
      'CSS3: text-justify 控制 justify 对齐的具体算法(inter-word/inter-character)',
      'CSS3: text-align-all 设置除最后一行外所有行的对齐方式,text-align 成为其简写',
      '继承性:text-indent 和 text-align 均可继承',
      'text-indent 仅影响块容器的首个格式化行,对 inline-block 后代也会继承',
    ],
    tutorial: [
      { type: 'heading', text: '文本缩进基础' },
      { type: 'paragraph', text: 'text-indent 属性控制块容器首行文本的缩进量,常用于段落排版。它只影响块级元素的首行,对后续行不起作用。' },
      { type: 'code', code: 'p {\n  text-indent: 2em; /* 首行缩进 2 个字符宽 */\n}\n\narticle > p:first-child {\n  text-indent: 0; /* 文章首段不缩进 */\n}', lang: 'css', caption: '基础缩进设置' },
      { type: 'tip', text: '使用 em 单位作为 text-indent 的值可以根据字体大小自动调整,保证在不同字号下都有合适的缩进量。' },
      { type: 'heading', text: '悬挂缩进与负值' },
      { type: 'paragraph', text: 'text-indent 支持负值,可以实现悬挂缩进效果——首行向左突出,其余行正常对齐。这种效果常用于列表或定义列表的排版。' },
      { type: 'code', code: '.hanging {\n  text-indent: -2em;\n  padding-left: 2em; /* 配合 padding 避免文字被裁剪 */\n}', lang: 'css', caption: '悬挂缩进' },
      { type: 'example', title: '悬挂缩进应用', code: '<p class="hanging">• 这是一个列表项。首行由于负缩进向左突出,后续行都从正常位置开始,形成悬挂效果。</p>', lang: 'html', explanation: '负的 text-indent 配合等量的 padding-left,使首行符号向左突出,后续文字对齐。' },
      { type: 'heading', text: '文本对齐方式' },
      { type: 'paragraph', text: 'text-align 控制行内内容在行框内的水平对齐。它影响文本、内联盒、图片等所有行内内容的对齐位置。' },
      { type: 'code', code: '.left   { text-align: left; }   /* 左对齐 */\n.right  { text-align: right; }  /* 右对齐 */\n.center { text-align: center; } /* 居中 */\n.justify { text-align: justify; } /* 两端对齐 */\n\n/* CSS3 逻辑值 */\n.start { text-align: start; } /* 起始端(LTR 为左,RTL 为右) */\n.end   { text-align: end; }   /* 结束端 */', lang: 'css', caption: 'text-align 的各种取值' },
      { type: 'warning', text: 'text-align: justify 会调整单词和字符间距以实现两端对齐,可能导致某些行间距过大。最后一行不会两端对齐,除非使用 text-align-last。' },
      { type: 'heading', text: 'CSS3 增强功能' },
      { type: 'paragraph', text: 'CSS3 引入了更精细的对齐控制属性,包括 text-align-last(控制最后一行对齐)、text-justify(控制两端对齐算法)和 text-indent 的新关键字。' },
      { type: 'code', code: '.justified-block {\n  text-align: justify;\n  text-align-last: center; /* 最后一行居中 */\n  text-justify: inter-word; /* 仅调整单词间距 */\n}\n\n.hanging-each-line {\n  text-indent: 2em each-line; /* 每个强制换行后的首行都缩进 */\n}\n\n.reverse-indent {\n  text-indent: 2em hanging; /* 首行不缩进,其余行缩进 */\n}', lang: 'css', caption: 'CSS3 新增特性' },
      { type: 'example', title: '两端对齐精细控制', code: 'p {\n  text-align: justify;\n  text-justify: inter-character; /* CJK 文本使用字符间距调整 */\n  text-align-last: justify; /* 最后一行也两端对齐 */\n}', lang: 'css', explanation: 'inter-character 适合中日韩文本,会在字符间均匀分布空白;inter-word 适合拉丁文本,只调整单词间距。' },
      { type: 'tip', text: 'start 和 end 值会根据书写方向(direction 属性)自动映射:在 LTR 中 start=left、end=right;在 RTL 中 start=right、end=left。这使得国际化排版更加便捷。' },
      { type: 'list', items: [
        'text-indent 仅影响块容器的首个格式化行',
        '百分比值相对于包含块的宽度计算',
        'text-align 会被块级容器的后代继承',
        'text-align: justify 需要足够的内容才能生效,单行文本不会两端对齐',
        'text-indent 对 inline-block 元素也会继承并生效',
      ] },
    ],
  },
  {
    id: 'decoration',
    number: '2',
    title: { zh: '文本装饰', en: 'Text Decoration' },
    specId: 'decoration',
    summary: {
      zh: 'text-decoration 为文本添加下划线、上划线、删除线等装饰线。CSS3 将其拆分为多个子属性,支持装饰线的颜色、样式、粗细等精细控制。',
      en: 'text-decoration adds decorative lines such as underlines, overlines, and strikethroughs to text. CSS3 splits it into multiple sub-properties, supporting fine control over line color, style, thickness, and more.',
    },
    keyPoints: [
      'CSS2: text-decoration 支持 underline/overline/line-through/blink',
      'CSS3: 拆分为 text-decoration-line/color/style/thickness 子属性',
      'text-underline-offset 控制下划线与文本的距离',
      'text-underline-position 控制下划线的绘制位置(auto/under/left/right)',
      'text-decoration 不可继承,但装饰线通过盒树传播到所有流内后代内联元素',
      'CSS3: text-shadow 为文本添加阴影效果,接受逗号分隔的阴影列表(偏移+模糊+颜色)',
      'CSS3: text-emphasis 为东亚文本添加强调标记(着重号),支持 filled/open 和多种形状',
      'CSS3: text-emphasis-position 控制强调标记的位置(日文在上方,中文在下方)',
      'UA 可在下划线/上划线穿过字形墨迹处中断装饰线(skip ink 行为)',
      '装饰线仅绘制在非替换内联盒上,原子内联(图片/inline-block)不绘制装饰',
    ],
    tutorial: [
      { type: 'heading', text: '文本装饰线基础' },
      { type: 'paragraph', text: '`text-decoration` 为文本添加视觉装饰线——下划线、上划线、删除线等。在 CSS2 中它是一个简单的属性,到了 CSS3 被拆分为多个子属性,提供了对装饰线颜色、样式、粗细的精细控制。' },
      { type: 'code', code: '/* CSS2 基础用法 */\na { text-decoration: underline; }\ndel { text-decoration: line-through; }\n.highlight { text-decoration: underline overline; }\n\n/* CSS3 拆分为子属性 */\na {\n  text-decoration-line: underline;\n  text-decoration-color: #e74c3c;\n  text-decoration-style: wavy;\n  text-decoration-thickness: 2px;\n}', lang: 'css', caption: 'CSS2 和 CSS3 的文本装饰写法' },
      { type: 'heading', text: 'CSS3 子属性详解' },
      { type: 'list', items: [
        '`text-decoration-line`: underline | overline | line-through | blink(已废弃)',
        '`text-decoration-style`: solid | double | dotted | dashed | wavy',
        '`text-decoration-color`: 任意颜色值,默认 currentcolor',
        '`text-decoration-thickness`: auto | from-font | 长度 | 百分比',
      ] },
      { type: 'example', title: '波浪线拼写错误提示', code: '.spelling-error {\n  text-decoration-line: underline;\n  text-decoration-style: wavy;\n  text-decoration-color: red;\n  text-decoration-thickness: 1px;\n}', lang: 'css', explanation: '红色波浪下划线是文本编辑器中常见的拼写错误提示样式,现在纯 CSS 就能实现。' },
      { type: 'heading', text: '下划线位置与偏移' },
      { type: 'paragraph', text: '`text-underline-offset` 控制下划线与文本基线的距离,`text-underline-position` 控制下划线绘制在文本上方还是下方。这两个属性在排版细节上提供了精确控制。' },
      { type: 'code', code: 'a {\n  text-decoration: underline;\n  text-underline-offset: 3px;  /* 下划线远离文字 3px */\n  text-underline-position: under; /* 下划线不穿过字形下伸部分 */\n}', lang: 'css', caption: 'under 值让下划线避开 g、p、y 等字母的下伸部分' },
      { type: 'heading', text: '文本阴影' },
      { type: 'paragraph', text: '`text-shadow` 为文本添加阴影效果,语法类似 `box-shadow` 但不支持 spread 和 inset。可以叠加多个阴影。' },
      { type: 'code', code: '/* 基本阴影 */\nh1 { text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }\n\n/* 发光效果 */\n.glow { text-shadow: 0 0 10px #00ff00, 0 0 20px #00ff00; }\n\n/* 浮雕效果 */\n.emboss { text-shadow: 1px 1px 0 #fff, -1px -1px 0 #333; }', lang: 'css', caption: '文本阴影的多种创意用法' },
      { type: 'heading', text: '东亚文本强调标记' },
      { type: 'paragraph', text: '`text-emphasis` 是为东亚文本设计的强调方式——在文字上方(日文)或下方(中文)添加小圆点或其他符号,即"着重号"。' },
      { type: 'code', code: '/* 中文着重号 */\n.emphasis-cn {\n  text-emphasis: filled circle;\n  text-emphasis-position: under right; /* 中文在下方 */\n}\n\n/* 日文着重号 */\n.emphasis-jp {\n  text-emphasis: filled sesame;\n  text-emphasis-position: over right; /* 日文在上方 */\n}', lang: 'css', caption: '中日文的着重号位置不同' },
      { type: 'warning', text: '`text-decoration` 不可继承,但装饰线会"传播"到所有流内后代内联元素。这意味着你无法通过在子元素上设置 `text-decoration: none` 来移除父元素的装饰线——需要在父元素上取消。' },
      { type: 'tip', text: '现代浏览器默认启用 "skip ink" 行为,下划线会自动在字形墨迹处中断,避免穿过 g、p 等字母的下伸部分。可以通过 `text-decoration-skip-ink: none` 关闭此行为。' },
    ] as TutorialBlock[],
  },
  {
    id: 'transform-spacing',
    number: '3',
    title: { zh: '变换与间距', en: 'Transform and Spacing' },
    specId: 'transform-spacing',
    summary: {
      zh: 'text-transform 控制文本大小写转换,letter-spacing 和 word-spacing 控制字符和单词间距。CSS3 新增断行和连字符控制。',
      en: 'text-transform controls text case conversion, while letter-spacing and word-spacing control character and word spacing. CSS3 adds line breaking and hyphenation control.',
    },
    keyPoints: [
      'text-transform: capitalize/uppercase/lowercase/none,转换依赖语言',
      'CSS3: text-transform 新增 full-width(全角转换)和 full-size-kana(全角假名)值',
      'letter-spacing 控制字符间距,word-spacing 控制单词间距,均可继承',
      'letter-spacing 设为具体长度值时,UA 不可再为两端对齐调整字符间距',
      'CSS3: word-break 控制单词内断行规则(break-all 允许 CJK 规则断词,keep-all 禁止)',
      'CSS3: overflow-wrap(word-wrap) 控制长单词是否可断行,anywhere 值允许任意位置断行',
      'CSS3: hyphens 控制是否自动插入连字符(none/manual/auto)',
      'CSS3: line-break 控制 CJK 文本的断行严格程度(loose/normal/strict/anywhere)',
      'word-spacing 仅影响空格(U+0020)和非断行空格(U+00A0),不影响固定宽度空格',
      'text-transform 的 capitalize 值将每个单词的首字符转为大写,仅影响双大小写文字',
    ],
    tutorial: [
      { type: 'heading', text: '文本大小写转换' },
      { type: 'paragraph', text: '`text-transform` 控制文本的大小写转换,无需修改 HTML 源码即可改变文本的显示形式。这对于标题、按钮、导航等 UI 元素非常有用。' },
      { type: 'code', code: '.uppercase { text-transform: uppercase; }   /* HELLO WORLD */\n.lowercase { text-transform: lowercase; }   /* hello world */\n.capitalize { text-transform: capitalize; } /* Hello World */\n.none { text-transform: none; }             /* 保持原样 */\n\n/* CSS3 扩展 */\n.fullwidth { text-transform: full-width; }  /* 全角转换 */\n.kana { text-transform: full-size-kana; }   /* 全角假名 */', lang: 'css', caption: '大小写转换的各种值' },
      { type: 'warning', text: '`capitalize` 只将每个"单词"的第一个字符转为大写,对已经是大写的字符无效。而且"单词"的定义依赖于语言——不同语言对单词边界的判定不同。' },
      { type: 'heading', text: '字符间距与单词间距' },
      { type: 'paragraph', text: '`letter-spacing` 控制字符之间的额外间距,`word-spacing` 控制单词(空格分隔)之间的额外间距。两者都支持负值,可以让文字更紧凑。' },
      { type: 'code', code: '/* 标题常用的宽松字符间距 */\nh1 { letter-spacing: 0.1em; }\n\n/* 紧凑的大写文字 */\n.label {\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  font-size: 0.75rem;\n}\n\n/* 调整单词间距 */\n.wide-words { word-spacing: 0.5em; }\n.tight-words { word-spacing: -0.1em; }', lang: 'css', caption: '间距调整的常见用法' },
      { type: 'tip', text: '当 `letter-spacing` 设为具体长度值(而非 `normal`)时,浏览器不会再为 `text-align: justify` 调整字符间距——两端对齐只能通过调整单词间距实现。' },
      { type: 'heading', text: 'CSS3 断行控制' },
      { type: 'paragraph', text: 'CSS3 引入了多个断行相关属性,解决了不同语言文本的换行难题:' },
      { type: 'list', items: [
        '`word-break`: `break-all` 允许在任意字符间断行(适合 CJK 混排),`keep-all` 禁止在 CJK 字符间断行',
        '`overflow-wrap`(原 `word-wrap`): `break-word` 允许长单词在任意位置断行以防溢出,`anywhere` 更强力',
        '`hyphens`: `auto` 自动在合适位置插入连字符断行,`manual` 仅在 `&shy;` 处断行',
        '`line-break`: 控制 CJK 文本的断行严格程度——`loose`/`normal`/`strict`/`anywhere`',
      ] },
      { type: 'example', title: '防止长 URL 撑破容器', code: '.url-safe {\n  overflow-wrap: break-word;\n  word-break: break-all;\n  hyphens: auto;\n}', lang: 'css', explanation: '长 URL 和连续英文字符容易撑破容器。组合使用这些属性可以确保内容在必要时断行,不会溢出。' },
      { type: 'code', code: '/* CJK 文本断行控制 */\n.cjk-strict {\n  line-break: strict;  /* 禁止行首标点(。、)等 */\n  word-break: normal;\n}\n\n/* 英文文本自动连字符 */\n.hyphenated {\n  hyphens: auto;\n  lang: "en";  /* hyphens: auto 需要 lang 属性 */\n}', lang: 'css', caption: '不同语言的断行策略' },
      { type: 'warning', text: '`hyphens: auto` 需要 HTML 元素设置正确的 `lang` 属性才能工作。浏览器依赖语言字典来判断连字符断点位置。' },
    ] as TutorialBlock[],
  },
  {
    id: 'white-space',
    number: '4',
    title: { zh: '空白处理', en: 'White Space Handling' },
    specId: 'white-space',
    summary: {
      zh: 'white-space 属性控制如何处理元素内的空白字符和换行。CSS3 提供更细粒度的 white-space-collapse 和 text-wrap 属性。',
      en: 'The white-space property controls how whitespace characters and line breaks within an element are handled. CSS3 provides finer-grained white-space-collapse and text-wrap properties.',
    },
    keyPoints: [
      'normal: 合并空白,自动换行',
      'pre: 保留空白和换行,不自动换行',
      'nowrap: 合并空白,不自动换行',
      'pre-wrap: 保留空白和换行,自动换行(行尾空格可视觉折叠)',
      'pre-line: 保留换行但合并其他空白,自动换行',
      'CSS3: white-space-collapse 细分空白折叠行为(collapse/preserve/preserve-breaks/break-spaces)',
      'CSS3: text-wrap 细分换行行为(wrap/nowrap/balance/stable/pretty)',
      'CSS3: break-spaces 值类似 preserve 但保留的空格始终占位且行尾空格可换行',
      'CSS3: tab-size 控制制表符的显示宽度(默认 8 个空格宽)',
      '空白处理模型:先折叠空白、移除行首行尾空格,再进行断行和双向文本重排',
    ],
    tutorial: [
      { type: 'heading', text: 'white-space 属性一览' },
      { type: 'paragraph', text: '`white-space` 属性控制两件事:①源码中的空白字符(空格、制表符、换行)如何处理;②文本是否自动换行。五个经典值覆盖了最常见的场景。' },
      { type: 'code', code: '/* 默认:合并空白,自动换行 */\np { white-space: normal; }\n\n/* 保留所有空白和换行,不自动换行(代码块) */\npre { white-space: pre; }\n\n/* 合并空白,禁止自动换行(单行截断) */\n.nowrap { white-space: nowrap; }\n\n/* 保留空白和换行,但允许自动换行 */\n.pre-wrap { white-space: pre-wrap; }\n\n/* 保留换行但合并其他空白,自动换行 */\n.pre-line { white-space: pre-line; }', lang: 'css', caption: '五种经典 white-space 值' },
      { type: 'example', title: '单行文本截断', code: '.ellipsis {\n  white-space: nowrap;     /* 不换行 */\n  overflow: hidden;        /* 隐藏溢出 */\n  text-overflow: ellipsis; /* 显示省略号 */\n  max-width: 200px;\n}', lang: 'css', explanation: '经典的单行省略号三件套,必须配合 `white-space: nowrap` 使用。' },
      { type: 'heading', text: 'CSS3 细粒度控制' },
      { type: 'paragraph', text: 'CSS3 将 `white-space` 拆分为两个独立维度:`white-space-collapse`(空白折叠)和 `text-wrap`(换行行为),提供更精细的控制。' },
      { type: 'code', code: '/* CSS3 新属性 */\n.balanced {\n  text-wrap: balance; /* 让多行文本的行宽尽量均匀(适合标题) */\n}\n\n.pretty {\n  text-wrap: pretty; /* 优化段落最后一行,避免孤行 */\n}\n\n/* tab-size 控制制表符宽度 */\npre { tab-size: 4; } /* 制表符宽度改为 4 个空格 */', lang: 'css', caption: 'CSS3 的文本换行增强' },
      { type: 'tip', text: '`text-wrap: balance` 非常适合标题文字。浏览器会自动计算最优断行位置,使多行标题的行宽尽量均匀,避免出现"最后一行只有一个词"的尴尬情况。' },
      { type: 'warning', text: '`white-space: pre` 会保留源码中的所有空白——包括缩进空格。如果你的 HTML 有缩进,这些缩进也会显示出来。使用 `pre-line` 可以避免这个问题(保留换行但合并空格)。' },
      { type: 'list', items: [
        '`normal`: 合并空白 + 自动换行(默认)',
        '`pre`: 保留空白 + 不自动换行',
        '`nowrap`: 合并空白 + 不自动换行',
        '`pre-wrap`: 保留空白 + 自动换行',
        '`pre-line`: 合并空白(但保留换行) + 自动换行',
      ] },
    ] as TutorialBlock[],
  },
  {
    id: 'writing-modes',
    number: '5',
    title: { zh: '书写模式', en: 'Writing Modes' },
    specId: 'writing-modes',
    summary: {
      zh: 'CSS3 书写模式模块定义了文本的排版方向和布局流。支持横排、竖排以及从右到左的书写系统,并提供逻辑属性映射到物理属性的机制。',
      en: 'The CSS3 Writing Modes module defines text layout direction and flow. It supports horizontal and vertical layout, as well as right-to-left writing systems, and provides a mechanism for mapping logical properties to physical properties.',
    },
    keyPoints: [
      'writing-mode 控制块流方向和行内方向:horizontal-tb/vertical-rl/vertical-lr',
      'CSS3: writing-mode 新增 sideways-rl/sideways-lr,文本整体旋转而非逐字直排',
      'text-orientation 控制字符在垂直文本中的方向(mixed/upright/sideways)',
      'direction 和 unicode-bidi 控制双向文本(如阿拉伯文/希伯来文)',
      'CSS3: text-combine-upright 将多个字符组合为单个字形宽度(横向内纵中横排)',
      '逻辑属性(inline-start/block-end)自动映射到物理属性(left/top/right/bottom)',
      '块方向(block direction)为块级盒堆叠方向,行内方向(inline direction)为文本流动方向',
      '垂直文本排版对中日韩语言至关重要,CJK 字符默认直立,拉丁字母默认旋转',
      'text-orientation: upright 使所有字符直立排列,常用于竖排中的数字和拉丁文',
      'unicode-bidi: isolate/plaintext 提供更安全的双向文本隔离',
    ],
    tutorial: [
      { type: 'heading', text: '书写模式:不只是从左到右' },
      { type: 'paragraph', text: 'CSS 的书写模式系统让你的样式能适配全球各种语言——从横排的英文到竖排的日文,从左到右的中文到从右到左的阿拉伯文。`writing-mode` 属性是这个系统的核心。' },
      { type: 'code', code: '/* 默认横排 */\n.horizontal { writing-mode: horizontal-tb; }\n\n/* 竖排:从右到左(日文、繁体中文) */\n.vertical-rl { writing-mode: vertical-rl; }\n\n/* 竖排:从左到右(蒙古文) */\n.vertical-lr { writing-mode: vertical-lr; }', lang: 'css', caption: '三种基本书写模式' },
      { type: 'heading', text: '块方向与行内方向' },
      { type: 'paragraph', text: '理解书写模式的关键是**块方向**(block direction)和**行内方向**(inline direction)两个概念。块方向是块级盒堆叠的方向,行内方向是文本流动的方向。横排时块方向从上到下、行内方向从左到右;竖排时两者会旋转。' },
      { type: 'example', title: '竖排日文排版', code: '.japanese-text {\n  writing-mode: vertical-rl;\n  text-orientation: mixed; /* CJK 字符直立,拉丁字母旋转 */\n  line-height: 1.8;\n  height: 400px;\n}', lang: 'css', explanation: '`vertical-rl` 让文本从上到下、从右到左排列。`text-orientation: mixed` 是默认值——汉字和假名直立显示,英文字母和数字旋转 90 度。' },
      { type: 'heading', text: '文字方向控制' },
      { type: 'paragraph', text: '`text-orientation` 控制字符在竖排文本中的方向。`upright` 让所有字符直立排列(包括拉丁字母),`sideways` 让所有字符旋转。' },
      { type: 'code', code: '.all-upright {\n  writing-mode: vertical-rl;\n  text-orientation: upright; /* 所有字符直立,包括 ABC 123 */\n}\n\n/* 纵中横排:竖排中嵌入横排数字 */\n.tcy {\n  text-combine-upright: all; /* "2024" 压缩在一个字宽内横排 */\n}', lang: 'css', caption: '字符方向与纵中横排' },
      { type: 'heading', text: '双向文本(Bidi)' },
      { type: 'paragraph', text: '当文档中混合了不同方向的文本(如英文中嵌入阿拉伯文)时,需要 `direction` 和 `unicode-bidi` 属性配合 Unicode 双向算法来正确排版。' },
      { type: 'code', code: '/* 从右到左的文档 */\nhtml[lang="ar"] { direction: rtl; }\n\n/* 隔离嵌入的不同方向文本 */\n.bidi-isolate { unicode-bidi: isolate; }', lang: 'css', caption: 'RTL 和双向文本隔离' },
      { type: 'warning', text: '不要仅靠 CSS 的 `direction: rtl` 来处理阿拉伯文/希伯来文页面。应该在 HTML 的 `<html>` 标签上设置 `dir="rtl"` 属性,让浏览器的双向算法正确工作。CSS 的 `direction` 应该只用于覆盖特定元素。' },
      { type: 'tip', text: '逻辑属性(`margin-inline-start`、`padding-block-end` 等)会根据 `writing-mode` 和 `direction` 自动映射到正确的物理方向。在需要支持多种书写模式的项目中,优先使用逻辑属性。' },
    ] as TutorialBlock[],
  },
];

export const anchors: Record<string, string> = {
  'indentation': 'text-indent-align',
  'alignment': 'text-indent-align',
  'text-align-prop': 'text-indent-align',
  'decoration': 'decoration',
  'lining-striking-props': 'decoration',
  'caps-prop': 'transform-spacing',
  'spacing-props': 'transform-spacing',
  'white-space-prop': 'white-space',
  'white-space-processing': 'white-space',
  'writing-mode': 'writing-modes',
  'bidi': 'writing-modes',
  'propdef-text-indent': 'text-indent-align',
  'propdef-text-align': 'text-indent-align',
  'propdef-text-decoration': 'decoration',
  'propdef-text-transform': 'transform-spacing',
  'propdef-letter-spacing': 'transform-spacing',
  'propdef-word-spacing': 'transform-spacing',
  'propdef-white-space': 'white-space',
};

// ============================================================
// 属性定义 (CSS2.2 Ch16 Text + CSS3 扩展)
// ============================================================

const TEXT = 'https://www.w3.org/TR/CSS22/text.html';
const TEXT3 = 'https://www.w3.org/TR/css-text-3/';
const TEXT_DECOR3 = 'https://www.w3.org/TR/css-text-decor-3/';
const WRITING_MODES4 = 'https://www.w3.org/TR/css-writing-modes-4/';

export const propertyTerms: Record<string, PropertyEntry> = {
  // ── CSS2 基础属性 ──
  'text-indent': {
    zh: '文本缩进',
    value: '<length> | <percentage> | inherit',
    initial: '0',
    appliesTo: '块级容器',
    inherited: true,
    percentages: '相对于包含块的宽度',
    computedValue: '百分比保留或绝对长度',
    css2Url: `${TEXT}#propdef-text-indent`,
    css3Url: TEXT3,
    sectionRef: 'text#text-indent-align',
  },
  'text-align': {
    zh: '文本对齐',
    value: 'left | right | center | justify | inherit',
    initial: 'start(CSS3) / 取决于 direction(CSS2)',
    appliesTo: '块级容器',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: `${TEXT}#propdef-text-align`,
    css3Url: TEXT3,
    sectionRef: 'text#text-indent-align',
  },
  'text-decoration': {
    zh: '文本装饰',
    value: 'none | [ underline || overline || line-through || blink ] | inherit',
    initial: 'none',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '指定值',
    css2Url: `${TEXT}#propdef-text-decoration`,
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-transform': {
    zh: '文本变换',
    value: 'capitalize | uppercase | lowercase | none | inherit',
    initial: 'none',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: `${TEXT}#propdef-text-transform`,
    css3Url: TEXT3,
    sectionRef: 'text#transform-spacing',
  },
  'letter-spacing': {
    zh: '字符间距',
    value: 'normal | <length> | inherit',
    initial: 'normal',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: 'normal 或绝对长度',
    css2Url: `${TEXT}#propdef-letter-spacing`,
    css3Url: TEXT3,
    sectionRef: 'text#transform-spacing',
  },
  'word-spacing': {
    zh: '单词间距',
    value: 'normal | <length> | inherit',
    initial: 'normal',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: 'normal 时为 0;否则为绝对长度',
    css2Url: `${TEXT}#propdef-word-spacing`,
    css3Url: TEXT3,
    sectionRef: 'text#transform-spacing',
  },
  'white-space': {
    zh: '空白处理',
    value: 'normal | pre | nowrap | pre-wrap | pre-line | inherit',
    initial: 'normal',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: `${TEXT}#propdef-white-space`,
    css3Url: TEXT3,
    sectionRef: 'text#white-space',
  },

  // ── CSS3 新增属性:text-align 扩展 ──
  'text-align-last': {
    zh: '最后一行对齐',
    value: 'auto | start | end | left | right | center | justify',
    initial: 'auto',
    appliesTo: '块级容器',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#text-indent-align',
  },
  'text-justify': {
    zh: '对齐算法',
    value: 'auto | inter-word | inter-character | none',
    initial: 'auto',
    appliesTo: '块级容器和内联盒',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#text-indent-align',
  },

  // ── CSS3 新增属性:text-decoration 拆分 ──
  'text-decoration-line': {
    zh: '文本装饰线',
    value: 'none | [ underline || overline || line-through || blink ]',
    initial: 'none',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-decoration-color': {
    zh: '文本装饰色',
    value: '<color>',
    initial: 'currentcolor',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '计算后的颜色值',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-decoration-style': {
    zh: '文本装饰样式',
    value: 'solid | double | dotted | dashed | wavy',
    initial: 'solid',
    appliesTo: '所有元素',
    inherited: false,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-decoration-thickness': {
    zh: '文本装饰粗细',
    value: 'auto | from-font | <length> | <percentage>',
    initial: 'auto',
    appliesTo: '所有元素',
    inherited: false,
    percentages: '相对于元素字体大小',
    computedValue: '指定值(百分比转为绝对长度)',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-underline-offset': {
    zh: '下划线偏移',
    value: 'auto | <length> | <percentage>',
    initial: 'auto',
    appliesTo: '所有元素',
    inherited: true,
    percentages: '相对于元素字体大小',
    computedValue: '指定值(百分比转为绝对长度)',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-underline-position': {
    zh: '下划线位置',
    value: 'auto | from-font | [ under || [ left | right ] ]',
    initial: 'auto',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },

  // ── CSS3 新增属性:text-shadow 与 emphasis ──
  'text-shadow': {
    zh: '文本阴影',
    value: 'none | [ <color>? && <length>{2,3} ]#',
    initial: 'none',
    appliesTo: '文本',
    inherited: true,
    percentages: null,
    computedValue: 'none 或阴影列表(绝对长度+计算颜色)',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-emphasis-style': {
    zh: '强调标记样式',
    value: "none | [ [ filled | open ] || [ dot | circle | double-circle | triangle | sesame ] ] | <string>",
    initial: 'none',
    appliesTo: '文本',
    inherited: true,
    percentages: null,
    computedValue: 'none、形状与填充关键字对、或字符串',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-emphasis-color': {
    zh: '强调标记颜色',
    value: '<color>',
    initial: 'currentcolor',
    appliesTo: '文本',
    inherited: true,
    percentages: null,
    computedValue: '计算后的颜色值',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },
  'text-emphasis-position': {
    zh: '强调标记位置',
    value: '[ over | under ] && [ right | left ]?',
    initial: 'over right',
    appliesTo: '文本',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT_DECOR3,
    sectionRef: 'text#decoration',
  },

  // ── CSS3 新增属性:断行与连字符 ──
  'word-break': {
    zh: '单词断行',
    value: 'normal | break-all | keep-all | break-word',
    initial: 'normal',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#transform-spacing',
  },
  'overflow-wrap': {
    zh: '溢出换行',
    value: 'normal | break-word | anywhere',
    initial: 'normal',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#transform-spacing',
  },
  'word-wrap': {
    zh: '单词换行(别名)',
    value: 'normal | break-word',
    initial: 'normal',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#transform-spacing',
  },
  'hyphens': {
    zh: '连字符',
    value: 'none | manual | auto',
    initial: 'manual',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#transform-spacing',
  },
  'line-break': {
    zh: '断行规则',
    value: 'auto | loose | normal | strict | anywhere',
    initial: 'auto',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#transform-spacing',
  },

  // ── CSS3 新增属性:white-space 细化 ──
  'white-space-collapse': {
    zh: '空白折叠',
    value: 'collapse | preserve | preserve-breaks | preserve-spaces | break-spaces',
    initial: 'collapse',
    appliesTo: '所有元素',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#white-space',
  },
  'text-wrap': {
    zh: '文本换行',
    value: 'wrap | nowrap | balance | stable | pretty',
    initial: 'wrap',
    appliesTo: '块级容器和内联盒',
    inherited: true,
    percentages: null,
    computedValue: '指定值',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#white-space',
  },
  'tab-size': {
    zh: '制表符宽度',
    value: '<number> | <length>',
    initial: '8',
    appliesTo: '块级容器',
    inherited: true,
    percentages: null,
    computedValue: '指定值(长度转为绝对值)',
    css2Url: '',
    css3Url: TEXT3,
    sectionRef: 'text#white-space',
  },
};

// ============================================================
// 术语表
// ============================================================

export const glossaryTerms: Record<string, GlossaryEntry> = {
  'text decoration': {
    zh: '文本装饰',
    description: '为文本添加的视觉装饰线,如下划线、上划线、删除线等。CSS3 允许精细控制装饰线的颜色、样式、粗细和位置。',
    sectionRef: 'text#decoration',
    css2Url: `${TEXT}#propdef-text-decoration`,
    specUrl: TEXT_DECOR3,
  },
  'writing mode': {
    zh: '书写模式',
    description: '定义文本的排版方向(横排/竖排)和块流方向。支持中日韩竖排、阿拉伯文从右到左等多种书写系统。',
    sectionRef: 'text#writing-modes',
    specUrl: WRITING_MODES4,
  },
  'logical property': {
    zh: '逻辑属性',
    description: '基于书写模式的相对方向属性(如 inline-start/block-end),自动映射到物理属性(left/top/right/bottom)。使 CSS 适配不同书写方向。',
    sectionRef: 'text#writing-modes',
    specUrl: 'https://www.w3.org/TR/css-logical-1/',
  },
  'white space': {
    zh: '空白字符',
    description: 'HTML 中的空格、制表符、换行符等。white-space 属性控制如何处理这些字符(保留/合并/换行)。',
    sectionRef: 'text#white-space',
    css2Url: `${TEXT}#propdef-white-space`,
    specUrl: TEXT3,
  },
  'hyphenation': {
    zh: '连字符断字',
    description: '在单词内适当位置插入连字符并换行,避免行尾出现过长单词。hyphens 属性控制是否自动断字。',
    sectionRef: 'text#transform-spacing',
    specUrl: TEXT3,
  },
  'line breaking': {
    zh: '断行规则',
    description: '决定文本如何在行尾换行。不同语言有不同规则:CJK 字符间可断行,拉丁文需在单词边界断行。word-break 和 overflow-wrap 控制断行行为。',
    sectionRef: 'text#transform-spacing',
    specUrl: TEXT3,
  },
  'text alignment': {
    zh: '文本对齐',
    description: '控制行内内容在行框内的水平对齐方式。text-align 支持 left/right/center/justify 四种基本对齐,justify 会调整字符间距使行两端对齐。',
    sectionRef: 'text#text-indent-align',
    css2Url: `${TEXT}#propdef-text-align`,
    specUrl: TEXT3,
  },
  'bidi': {
    zh: '双向文本',
    description: '混合从左到右(如英文)和从右到左(如阿拉伯文)书写方向的文本。Unicode 双向算法和 direction/unicode-bidi 属性共同处理双向文本排版。',
    sectionRef: 'text#writing-modes',
    css2Url: 'https://www.w3.org/TR/CSS22/visuren.html#propdef-direction',
    specUrl: WRITING_MODES4,
  },
  'text indent': {
    zh: '文本缩进',
    description: '块容器首行文本的水平偏移量。text-indent 可使用长度或百分比,支持负值实现悬挂缩进(首行突出,其余行缩进)。',
    sectionRef: 'text#text-indent-align',
    css2Url: `${TEXT}#propdef-text-indent`,
    specUrl: TEXT3,
  },
  'letter spacing': {
    zh: '字符间距',
    description: '字符之间的额外空间。letter-spacing 增加或减少字符间距,常用于标题或品牌文字的视觉调整。',
    sectionRef: 'text#transform-spacing',
    css2Url: `${TEXT}#propdef-letter-spacing`,
    specUrl: TEXT3,
  },
  'word spacing': {
    zh: '单词间距',
    description: '单词(空格分隔的标记)之间的额外空间。word-spacing 调整单词间距,影响 justify 对齐的拉伸效果。',
    sectionRef: 'text#transform-spacing',
    css2Url: `${TEXT}#propdef-word-spacing`,
    specUrl: TEXT3,
  },
  'text-shadow': {
    zh: '文本阴影',
    description: '为文本添加一个或多个阴影效果。每个阴影由水平/垂直偏移量、可选模糊半径和颜色组成。多个阴影从前到后绘制,不会覆盖文本本身。',
    sectionRef: 'text#decoration',
    specUrl: TEXT_DECOR3,
  },
  'text-emphasis': {
    zh: '文本强调标记',
    description: '东亚排版中用于强调文本的小符号(着重号)。text-emphasis 简写设置标记的样式和颜色,text-emphasis-position 控制标记在文字上方或下方的位置。',
    sectionRef: 'text#decoration',
    specUrl: TEXT_DECOR3,
  },
  'text-overflow': {
    zh: '文本溢出',
    description: '当行内内容溢出块容器时的显示方式。常用 ellipsis 值在截断处显示省略号(...)。需配合 overflow: hidden 和 white-space: nowrap 使用。',
    sectionRef: 'text#white-space',
    specUrl: 'https://www.w3.org/TR/css-overflow-3/#text-overflow',
  },
  'line-break': {
    zh: '断行规则',
    description: '控制 CJK(中日韩)文本的断行严格程度。loose 允许宽松断行(适合短行),normal 使用常规规则,strict 禁止某些断行机会(如禁止标点悬挂)。',
    sectionRef: 'text#transform-spacing',
    specUrl: TEXT3,
  },
  'text-combine-upright': {
    zh: '纵中横排',
    description: '在垂直书写模式中将多个字符组合到单个字形宽度内水平排列,常用于竖排文本中的两位数字(如日期、年份)。all 值启用组合,digits 值限定数字位数。',
    sectionRef: 'text#writing-modes',
    specUrl: WRITING_MODES4,
  },
  'block direction': {
    zh: '块方向',
    description: '块级盒依次堆叠的方向,由 writing-mode 决定。横排时块方向为从上到下,竖排(vertical-rl)时块方向为从右到左。与行内方向(inline direction)正交。',
    sectionRef: 'text#writing-modes',
    specUrl: WRITING_MODES4,
  },
  'inline direction': {
    zh: '行内方向',
    description: '行内内容(文本、内联盒)流动的方向。横排时行内方向为从左到右(LTR)或从右到左(RTL),竖排时行内方向为从上到下。',
    sectionRef: 'text#writing-modes',
    specUrl: WRITING_MODES4,
  },
  'text-wrap-balance': {
    zh: '文本换行平衡',
    description: 'text-wrap: balance 值使多行文本的行宽尽量均匀分布,避免最后一行过短。适用于标题等短文本,浏览器会自动计算最优断行位置。',
    sectionRef: 'text#white-space',
    specUrl: TEXT3,
  },
};
