{
  "specName": "css-variables-1",
  "extractedAt": "2026-02-06T03:06:35.834Z",
  "totalSections": 15,
  "coreSections": 7,
  "sections": {
    "intro": {
      "id": "intro",
      "heading": "1.  Introduction",
      "content": "This section is not normative.\n\r\n \nLarge documents or applications\r\n (and even small ones)\r\n can contain quite a bit of CSS.\r\n Many of the values in the CSS file will be duplicate data;\r\n for example,\r\n a site may establish a color scheme\r\n and reuse three or four colors throughout the site.\r\n Altering this data can be difficult and error-prone,\r\n since it’s scattered throughout the CSS file\r\n (and possibly across multiple files),\r\n and may not be amenable to Find-and-Replace.\n\r\n \nThis module introduces a family of custom author-defined properties known collectively as [custom properties](#custom-property),\r\n which allow an author to assign arbitrary values to a property with an author-chosen name,\r\n and the [var()](#funcdef-var) function,\r\n which allow an author to then use those values in other properties elsewhere in the document.\r\n This makes it easier to read large files,\r\n as seemingly-arbitrary values now have informative names,\r\n and makes editing such files much easier and less error-prone,\r\n as one only has to change the value once,\r\n in the custom property,\r\n and the change will propagate to all uses of that variable automatically.\n\r\n 1.1. Value Definitions[](#values)\r\n \nThis specification follows the [CSS property definition conventions](https://www.w3.org/TR/CSS2/about.html#property-defs) from [[CSS2]](#biblio-css2) using the [value definition syntax](https://www.w3.org/TR/css-values-3/#value-defs) from [[CSS-VALUES-3]](#biblio-css-values-3).\r\n Value types not defined in this specification are defined in CSS Values & Units [CSS-VALUES-3].\r\n Combination with other CSS modules may expand the definitions of these value types.\n\r\n \nIn addition to the property-specific values listed in their definitions,\r\n all properties defined in this specification\r\n also accept the [CSS-wide keywords](https://www.w3.org/TR/css-values-4/#css-wide-keywords) as their property value.\r\n For readability they have not been repeated explicitly.",
      "rawLength": 2514
    },
    "defining-variables": {
      "id": "defining-variables",
      "heading": "2.  Defining Custom Properties: the --* family of properties",
      "content": "This specification defines an open-ended set of properties called [custom properties](#custom-property),\r\n which, among other things, are used to define the [substitution value](#substitute-a-var) of [var()](#funcdef-var) functions.\n\r\n \r\n \r\n \r\n Name:\r\n **--*[](#propdef-)**\r\n \r\n [Value:](https://www.w3.org/TR/css-values/#value-defs)\r\n [<declaration-value>](https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value)[?](https://www.w3.org/TR/css-values-4/#mult-opt)\r\n \r\n [Initial:](https://www.w3.org/TR/css-cascade/#initial-values)\r\n the [guaranteed-invalid value](#guaranteed-invalid-value)\r\n \r\n [Applies to:](https://www.w3.org/TR/css-cascade/#applies-to)\r\n all elements and all pseudo-elements (including those with restricted property lists)\r\n \r\n [Inherited:](https://www.w3.org/TR/css-cascade/#inherited-property)\r\n yes\r\n \r\n [Percentages:](https://www.w3.org/TR/css-values/#percentages)\r\n n/a\r\n \r\n [Computed value:](https://www.w3.org/TR/css-cascade/#computed)\r\n specified value with variables substituted, or the [guaranteed-invalid value](#guaranteed-invalid-value)\r\n \r\n [Canonical order:](https://www.w3.org/TR/cssom/#serializing-css-values)\r\n per grammar\r\n \r\n [Animation type:](https://www.w3.org/TR/web-animations/#animation-type)\r\n discrete\r\n \r\n \nUser agents are expected to support this property on all media, including non-visual ones.\n\r\n \nA **custom property** is any property\r\n whose name starts with two dashes (U+002D HYPHEN-MINUS),\r\n like --foo.\r\n The **<custom-property-name>** production corresponds to this:\r\n it’s defined as any [<dashed-ident>](https://www.w3.org/TR/css-values-4/#typedef-dashed-ident) (a valid [identifier](https://www.w3.org/TR/css-values-4/#css-css-identifier) that starts with two dashes),\r\n except -- itself,\r\n which is reserved for future use by CSS. [Custom properties](#custom-property) are solely for use by authors and users;\r\n CSS will never give them a meaning beyond what is presented here.\n\r\n \r\n Tests\r\n \n\r\n [variable-declaration-29.html](https://wpt.fyi/results/css/css-variables/variable-declaration-29.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-29.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-29.html)\r\n [variable-declaration-31.html](https://wpt.fyi/results/css/css-variables/variable-declaration-31.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-31.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-31.html)\r\n [variable-declaration-32.html](https://wpt.fyi/results/css/css-variables/variable-declaration-32.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-32.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-32.html)\r\n [variable-declaration-33.html](https://wpt.fyi/results/css/css-variables/variable-declaration-33.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-33.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-33.html)\r\n [variable-declaration-34.html](https://wpt.fyi/results/css/css-variables/variable-declaration-34.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-34.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-34.html)\r\n [variable-declaration-35.html](https://wpt.fyi/results/css/css-variables/variable-declaration-35.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-35.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-35.html)\r\n [variable-declaration-36.html](https://wpt.fyi/results/css/css-variables/variable-declaration-36.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-36.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-36.html)\r\n [variable-declaration-40.html](https://wpt.fyi/results/css/css-variables/variable-declaration-40.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-40.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-40.html)\r\n [variable-declaration-41.html](https://wpt.fyi/results/css/css-variables/variable-declaration-41.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-41.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-41.html)\r\n [variable-declaration-42.html](https://wpt.fyi/results/css/css-variables/variable-declaration-42.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-42.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-42.html)\r\n [variable-empty-name-reserved.html](https://wpt.fyi/results/css/css-variables/variable-empty-name-reserved.html) [(live test)](http://wpt.live/css/css-variables/variable-empty-name-reserved.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-empty-name-reserved.html)\r\n \n\r\n \r\n \r\n [](#example-81b6bcdd) Custom properties define variables,\r\n referenced with the [var()](#funcdef-var) notation,\r\n which can be used for many purposes.\r\n For example, a page that consistently uses a small set of colors in its design\r\n can store the colors in custom properties\r\n and use them with variables:\r\n\n```\n:root {\r\n --main-color: #06c;\r\n --accent-color: #006;\r\n}\r\n/* The rest of the CSS file */\r\n#foo h1 {\r\n color: var(--main-color);\r\n}\r\n\n```\n\r\n \nThe naming provides a mnemonic for the colors,\r\n prevents difficult-to-spot typos in the color codes,\r\n and if the theme colors are ever changed,\r\n focuses the change on one simple spot\r\n (the custom property value)\r\n rather than requiring many edits across all stylesheets in the webpage.\n\r\n \r\n \nUnlike other CSS properties,\r\n custom property names are not [ASCII case-insensitive](https://infra.spec.whatwg.org/#ascii-case-insensitive).\r\n Instead, custom property names are only equal to each other\r\n if they are [identical to](https://infra.spec.whatwg.org/#string-is) each other.\n\r\n \r\n Tests\r\n \n\r\n [css-vars-custom-property-case-sensitive-001.html](https://wpt.fyi/results/css/css-variables/css-vars-custom-property-case-sensitive-001.html) [(live test)](http://wpt.live/css/css-variables/css-vars-custom-property-case-sensitive-001.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/css-vars-custom-property-case-sensitive-001.html)\r\n \n\r\n \r\n \r\n [](#example-a71a0c0c) While both --foo and --FOO are valid,\r\n they are distinct properties —using var(--foo) will refer to the first one,\r\n while using var(--FOO) will refer to the second.\r\n \nPerhaps more surprisingly, --foó and --foó are distinct properties.\r\n The first is spelled with U+00F3 (LATIN SMALL LETTER O WITH ACUTE)\r\n while the second is spelled with an ASCII \"o\" followed by U+0301 (COMBINING ACUTE ACCENT),\r\n and the \"[identical to](https://infra.spec.whatwg.org/#string-is)\" relation uses direct codepoint-by-codepoint comparison\r\n to determine if two strings are equal,\r\n to avoid the complexities and pitfalls of unicode normalization and locale-specific collation.\n\r\n \r\n \nOperating systems, keyboards, or input methods\r\n sometimes encode visually-identical text\r\n using different codepoint sequences.\r\n Authors are advised to choose variable names\r\n that avoid potential confusion\r\n or to use escapes and other means\r\n to ensure that similar appearing sequences are identical.\r\n See Section 2.3 in [[CHARMOD-NORM]](#biblio-charmod-norm) for examples.\n\r\n \r\n [](#example-120efb12) Developers maintaining the following CSS\r\n might be confused why the test patch is red:\r\n\n```\n--fijord: red;\r\n--fĳord: green;\r\n--ﬁjord: blue;\r\n\r\n.test {\r\n background-color: var(--fijord);\r\n}\r\n\n```\n\r\n \nThe reason is that the first custom property\r\n uses the character sequence\r\n LATIN SMALL LETTER F + LATIN SMALL LETTER I + LATIN SMALL LETTER J;\r\n the second, identical-looking one\r\n uses the character sequence\r\n LATIN SMALL LETTER F + LATIN SMALL LIGATURE IJ\r\n while the third\r\n uses the character sequence\r\n LATIN SMALL LIGATURE FI + LATIN SMALL LETTER J.\n\r\n \nSo the CSS contains three distinct custom properties,\r\n two of which are unused.\n\r\n \r\n \nCustom properties are not reset by the [all](https://www.w3.org/TR/css-cascade-5/#propdef-all) property. We may define a property in the future that resets all variables.\n\r\n \nThe [CSS-wide keywords](https://www.w3.org/TR/css-values-4/#css-wide-keywords) can be used in custom properties,\r\n with the same meaning as in any another property.\n\r\n \r\n Tests\r\n \n\r\n [variable-declaration-43.html](https://wpt.fyi/results/css/css-variables/variable-declaration-43.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-43.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-43.html)\r\n [variable-declaration-44.html](https://wpt.fyi/results/css/css-variables/variable-declaration-44.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-44.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-44.html)\r\n [variable-declaration-45.html](https://wpt.fyi/results/css/css-variables/variable-declaration-45.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-45.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-45.html)\r\n [variable-declaration-46.html](https://wpt.fyi/results/css/css-variables/variable-declaration-46.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-46.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-46.html)\r\n [variable-declaration-47.html](https://wpt.fyi/results/css/css-variables/variable-declaration-47.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-47.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-47.html)\r\n [variable-declaration-56.html](https://wpt.fyi/results/css/css-variables/variable-declaration-56.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-56.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-56.html)\r\n [variable-declaration-57.html](https://wpt.fyi/results/css/css-variables/variable-declaration-57.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-57.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-57.html)\r\n [variable-declaration-58.html](https://wpt.fyi/results/css/css-variables/variable-declaration-58.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-58.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-58.html)\r\n [variable-declaration-60.html](https://wpt.fyi/results/css/css-variables/variable-declaration-60.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-60.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-60.html)\r\n [variable-definition-keywords.html](https://wpt.fyi/results/css/css-variables/variable-definition-keywords.html) [(live test)](http://wpt.live/css/css-variables/variable-definition-keywords.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-definition-keywords.html)\r\n \n\r\n \r\n \nNote: That is, they’re interpreted at cascaded-value time as normal,\r\n and are not preserved as the custom property’s value,\r\n and thus are not substituted in by the corresponding variable.\n\r\n \nNote: While this module focuses on the use of [custom properties](#custom-property) with the [var()](#funcdef-var) function to create “variables”,\r\n they can also be used as actual custom properties,\r\n parsed by and acted on by script.\r\n It’s expected that the CSS Extensions spec [[CSS-EXTENSIONS]](#biblio-css-extensions) will expand on these use-cases and make them easier to do.\n\r\n \nCustom properties are ordinary properties,\r\n so they can be declared on any element,\r\n are resolved with the normal inheritance and cascade rules,\r\n can be made conditional with [@media](https://www.w3.org/TR/css3-conditional/#at-ruledef-media) and other conditional rules,\r\n can be used in HTML’s style attribute,\r\n can be read or set using the CSSOM, etc.\n\r\n \r\n Tests\r\n \n\r\n [css-vars-custom-property-inheritance.html](https://wpt.fyi/results/css/css-variables/css-vars-custom-property-inheritance.html) [(live test)](http://wpt.live/css/css-variables/css-vars-custom-property-inheritance.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/css-vars-custom-property-inheritance.html)\r\n [variable-created-document.html](https://wpt.fyi/results/css/css-variables/variable-created-document.html) [(live test)](http://wpt.live/css/css-variables/variable-created-document.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-created-document.html)\r\n [variable-created-element.html](https://wpt.fyi/results/css/css-variables/variable-created-element.html) [(live test)](http://wpt.live/css/css-variables/variable-created-element.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-created-element.html)\r\n [variable-cssText.html](https://wpt.fyi/results/css/css-variables/variable-cssText.html) [(live test)](http://wpt.live/css/css-variables/variable-cssText.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-cssText.html)\r\n [variable-declaration-06.html](https://wpt.fyi/results/css/css-variables/variable-declaration-06.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-06.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-06.html)\r\n [variable-definition-cascading.html](https://wpt.fyi/results/css/css-variables/variable-definition-cascading.html) [(live test)](http://wpt.live/css/css-variables/variable-definition-cascading.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-definition-cascading.html)\r\n [variable-external-declaration-01.html](https://wpt.fyi/results/css/css-variables/variable-external-declaration-01.html) [(live test)](http://wpt.live/css/css-variables/variable-external-declaration-01.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-external-declaration-01.html)\r\n [variable-external-reference-01.html](https://wpt.fyi/results/css/css-variables/variable-external-reference-01.html) [(live test)](http://wpt.live/css/css-variables/variable-external-reference-01.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-external-reference-01.html)\r\n [variable-external-supports-01.html](https://wpt.fyi/results/css/css-variables/variable-external-supports-01.html) [(live test)](http://wpt.live/css/css-variables/variable-external-supports-01.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-external-supports-01.html)\r\n [variable-first-letter.html](https://wpt.fyi/results/css/css-variables/variable-first-letter.html) [(live test)](http://wpt.live/css/css-variables/variable-first-letter.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-first-letter.html)\r\n [variable-first-line.html](https://wpt.fyi/results/css/css-variables/variable-first-line.html) [(live test)](http://wpt.live/css/css-variables/variable-first-line.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-first-line.html)\r\n [variable-pseudo-element.html](https://wpt.fyi/results/css/css-variables/variable-pseudo-element.html) [(live test)](http://wpt.live/css/css-variables/variable-pseudo-element.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-pseudo-element.html)\r\n [variable-reference-13.html](https://wpt.fyi/results/css/css-variables/variable-reference-13.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-13.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-13.html)\r\n [variable-reference-14.html](https://wpt.fyi/results/css/css-variables/variable-reference-14.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-14.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-14.html)\r\n [variable-reference-shorthands.html](https://wpt.fyi/results/css/css-variables/variable-reference-shorthands.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-shorthands.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-shorthands.html)\r\n [variable-reference-visited.html](https://wpt.fyi/results/css/css-variables/variable-reference-visited.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-visited.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-visited.html)\r\n \n\r\n \r\n \nNotably, they can even be transitioned or animated,\r\n but since the UA has no way to interpret their contents,\r\n they always use the \"flips at 50%\" behavior\r\n that is used for any other pair of values that can’t be intelligently interpolated.\r\n However, any [custom property](#custom-property) used in a [@keyframes](https://www.w3.org/TR/css-animations-1/#at-ruledef-keyframes) rule\r\n becomes **animation-tainted**,\r\n which affects how it is treated when referred to via the [var()](#funcdef-var) function in an animation property.\n\r\n \r\n Tests\r\n \n\r\n [variable-animation-from-to.html](https://wpt.fyi/results/css/css-variables/variable-animation-from-to.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-from-to.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-from-to.html)\r\n [variable-animation-over-transition.html](https://wpt.fyi/results/css/css-variables/variable-animation-over-transition.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-over-transition.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-over-transition.html)\r\n [variable-animation-substitute-into-keyframe-shorthand.html](https://wpt.fyi/results/css/css-variables/variable-animation-substitute-into-keyframe-shorthand.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-substitute-into-keyframe-shorthand.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-substitute-into-keyframe-shorthand.html)\r\n [variable-animation-substitute-into-keyframe-transform.html](https://wpt.fyi/results/css/css-variables/variable-animation-substitute-into-keyframe-transform.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-substitute-into-keyframe-transform.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-substitute-into-keyframe-transform.html)\r\n [variable-animation-substitute-into-keyframe.html](https://wpt.fyi/results/css/css-variables/variable-animation-substitute-into-keyframe.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-substitute-into-keyframe.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-substitute-into-keyframe.html)\r\n [variable-animation-substitute-within-keyframe-fallback.html](https://wpt.fyi/results/css/css-variables/variable-animation-substitute-within-keyframe-fallback.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-substitute-within-keyframe-fallback.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-substitute-within-keyframe-fallback.html)\r\n [variable-animation-substitute-within-keyframe-multiple.html](https://wpt.fyi/results/css/css-variables/variable-animation-substitute-within-keyframe-multiple.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-substitute-within-keyframe-multiple.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-substitute-within-keyframe-multiple.html)\r\n [variable-animation-substitute-within-keyframe.html](https://wpt.fyi/results/css/css-variables/variable-animation-substitute-within-keyframe.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-substitute-within-keyframe.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-substitute-within-keyframe.html)\r\n [variable-animation-to-only.html](https://wpt.fyi/results/css/css-variables/variable-animation-to-only.html) [(live test)](http://wpt.live/css/css-variables/variable-animation-to-only.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-animation-to-only.html)\r\n \n\r\n \r\n \n[Animation-tainted](#animation-tainted) is \"infectious\":\r\n custom properties which reference animation-tainted properties\r\n also become animation-tainted.\n\r\n \r\n [](#example-d6247b0f) This style rule:\r\n\n```\n:root {\r\n --header-color: #06c;\r\n}\r\n\n```\n\r\n \ndeclares a [custom property](#custom-property) named --header-color on the root element,\r\n and assigns to it the value \"#06c\".\r\n This property is then inherited to the elements in the rest of the document.\r\n Its value can be referenced with the [var()](#funcdef-var) function:\n\r\n\n```\nh1 { background-color: var(--header-color); }\r\n\n```\n\r\n \nThe preceding rule is equivalent to writing [background-color: #06c;](https://www.w3.org/TR/css-backgrounds-3/#propdef-background-color),\r\n except that the variable name makes the origin of the color clearer,\r\n and if var(--header-color) is used on other elements in the document,\r\n all of the uses can be updated at once\r\n by changing the --header-color property on the root element.\n\r\n \r\n \r\n [](#example-c3e4e8d9) If a [custom property](#custom-property) is declared multiple times,\r\n the standard cascade rules help resolve it.\r\n Variables always draw from the computed value of the associated custom property on the same element:\r\n\n```\n:root { --color: blue; }\r\ndiv { --color: green; }\r\n#alert { --color: red; }\r\n* { color: var(--color); }\r\n\r\n<p>I inherited blue from the root element!</p>\r\n<div>I got green set directly on me!</div>\r\n<div id='alert'>\r\n While I got red set directly on me!\r\n <p>I’m red too, because of inheritance!</p>\r\n</div>\r\n\n```\n\r\n \r\n \r\n [](#example-8f013eba) A real-world example of [custom property](#custom-property) usage\r\n is easily separating out strings from where they’re used,\r\n to aid in maintenance of internationalization:\r\n\n```\n:root,\r\n:root:lang(en) {--external-link: \"external link\";}\r\n:root:lang(el) {--external-link: \"εξωτερικός σύνδεσμος\";}\r\n\r\na[href^=\"http\"]::after {content: \" (\" var(--external-link) \")\"}\r\n\n```\n\r\n \nThe variable declarations can even be kept in a separate file,\r\n to make maintaining the translations simpler.\n\r\n \r\n 2.1. Custom Property Value Syntax[](#syntax)\r\n \nThe allowed syntax for [custom properties](#custom-property) is extremely permissive.\r\n The [<declaration-value>](https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value) production matches any sequence of one or more tokens,\r\n so long as the sequence does not contain [<bad-string-token>](https://www.w3.org/TR/css-syntax-3/#typedef-bad-string-token), [<bad-url-token>](https://www.w3.org/TR/css-syntax-3/#typedef-bad-url-token),\r\n unmatched [<)-token>](https://www.w3.org/TR/css-syntax-3/#tokendef-close-paren), [<]-token>](https://www.w3.org/TR/css-syntax-3/#tokendef-close-square), or [<}-token>](https://www.w3.org/TR/css-syntax-3/#tokendef-close-curly),\r\n or top-level [<semicolon-token>](https://www.w3.org/TR/css-syntax-3/#typedef-semicolon-token) tokens or [<delim-token>](https://www.w3.org/TR/css-syntax-3/#typedef-delim-token) tokens with a value of \"!\".\n\r\n \r\n Tests\r\n \n\r\n [test_variable_legal_values.html](https://wpt.fyi/results/css/css-variables/test_variable_legal_values.html) [(live test)](http://wpt.live/css/css-variables/test_variable_legal_values.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/test_variable_legal_values.html)\r\n [variable-declaration-15.html](https://wpt.fyi/results/css/css-variables/variable-declaration-15.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-15.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-15.html)\r\n [variable-declaration-24.html](https://wpt.fyi/results/css/css-variables/variable-declaration-24.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-24.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-24.html)\r\n [variable-declaration-25.html](https://wpt.fyi/results/css/css-variables/variable-declaration-25.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-25.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-25.html)\r\n [variable-declaration-26.html](https://wpt.fyi/results/css/css-variables/variable-declaration-26.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-26.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-26.html)\r\n [variable-declaration-59.html](https://wpt.fyi/results/css/css-variables/variable-declaration-59.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-59.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-59.html)\r\n \n\r\n \r\n \nIn addition, if the value of a [custom property](#custom-property) contains a [var()](#funcdef-var) reference,\r\n the var() reference must be valid according to the specified var() grammar.\r\n If not, the custom property is invalid and must be ignored.\n\r\n \nNote: This definition,\r\n along with the general CSS syntax rules,\r\n implies that a custom property value never includes an unmatched quote or bracket,\r\n and so cannot have any effect on larger syntax constructs,\r\n like the enclosing style rule,\r\n when reserialized.\n\r\n \nNote: Custom properties can contain a trailing !important,\r\n but this is automatically removed from the property’s value by the CSS parser,\r\n and makes the custom property \"important\" in the CSS cascade.\r\n In other words, the prohibition on top-level \"!\" characters\r\n does not prevent !important from being used,\r\n as the !important is removed before syntax checking happens.\n\r\n \r\n Tests\r\n \n\r\n [variable-declaration-20.html](https://wpt.fyi/results/css/css-variables/variable-declaration-20.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-20.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-20.html)\r\n [variable-declaration-23.html](https://wpt.fyi/results/css/css-variables/variable-declaration-23.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-23.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-23.html)\r\n \n\r\n \r\n \r\n [](#example-fb41560d) For example, the following is a valid custom property:\r\n\n```\n--foo: if(x > 5) this.width = 10;\r\n\n```\n\r\n \nWhile this value is obviously useless as a variable,\r\n as it would be invalid in any normal property,\r\n it might be read and acted on by JavaScript.\n\r\n \r\n \nThe values of custom properties,\r\n and the values of [var()](#funcdef-var) functions substituted into custom properties,\r\n are case-sensitive,\r\n and must be preserved in their original author-given casing.\r\n (Many CSS values are [ASCII case-insensitive](https://infra.spec.whatwg.org/#ascii-case-insensitive),\r\n which user agents can take advantage of by \"canonicalizing\" them into a single casing,\r\n but that isn’t allowed for custom properties.)\n\r\n \r\n Tests\r\n \n\r\n [variable-declaration-38.html](https://wpt.fyi/results/css/css-variables/variable-declaration-38.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-38.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-38.html)\r\n [variable-declaration-39.html](https://wpt.fyi/results/css/css-variables/variable-declaration-39.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-39.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-39.html)\r\n \n\r\n \r\n \r\n Because custom properties can contain anything,\r\n there is no general way to know how to interpret what’s inside of them\r\n (until they’re substituted into a known property with [var()](#funcdef-var)).\r\n Rather than have them partially resolve in some cases but not others,\r\n they’re left completely unresolved;\r\n they’re a bare stream of [CSS tokens](https://www.w3.org/TR/css-syntax-3/#tokenization) interspersed with var() functions.\r\n \nThis has some knock-on implications.\r\n For example, relative URLs in CSS\r\n are resolved against the base URL of the stylesheet the value appears in.\r\n However, if a custom property like --my-image: url(foo.jpg); shows up in an \"/a/style.css\" stylesheet,\r\n it will not resolve into an absolute URL immediately;\r\n if that variable is later used in a different \"/b/style.css\" stylesheet\r\n like [background: var(--my-image);](https://www.w3.org/TR/css-backgrounds-3/#propdef-background),\r\n it will resolve at that point to \"/b/foo.jpg\".\n\r\n \r\n 2.2. Guaranteed-Invalid Values[](#guaranteed-invalid)\r\n \nThe initial value of a [custom property](#custom-property) is a **guaranteed-invalid value**.\r\n As defined in [§ 3 Using Cascading Variables: the var() notation](#using-variables),\r\n using [var()](#funcdef-var) to substitute a custom property with this as its value\r\n makes the property referencing it [invalid at computed-value time](#invalid-at-computed-value-time).\n\r\n \nThis value serializes as the empty string,\r\n but actually writing an empty value into a custom property,\r\n like --foo: ;,\r\n is a valid (empty) value,\r\n not the [guaranteed-invalid value](#guaranteed-invalid-value).\r\n If, for whatever reason,\r\n one wants to manually reset a variable to the guaranteed-invalid value,\r\n using the keyword [initial](https://www.w3.org/TR/css-cascade-5/#valdef-all-initial) will do this.\n\r\n 2.3. Resolving Dependency Cycles[](#cycles)\r\n \n[Custom properties](#custom-property) are left almost entirely unevaluated,\r\n except that they allow and evaluate the [var()](#funcdef-var) function in their value.\r\n This can create cyclic dependencies\r\n where a custom property uses a var() referring to itself,\r\n or two or more custom properties each attempt to refer to each other.\n\r\n \nFor each element,\r\n create a directed dependency graph,\r\n containing nodes for each [custom property](#custom-property).\r\n If the value of a custom property prop contains a [var()](#funcdef-var) function referring to the property var (including in the fallback argument of var()),\r\n add an edge between prop and the var. Edges are possible from a custom property to itself.\n\r\n \nIf there is a cycle in the dependency graph,\r\n all the [custom properties](#custom-property) in the cycle\r\n are [invalid at computed-value time](#invalid-at-computed-value-time).\n\r\n \r\n Tests\r\n \n\r\n [variable-cycles.html](https://wpt.fyi/results/css/css-variables/variable-cycles.html) [(live test)](http://wpt.live/css/css-variables/variable-cycles.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-cycles.html)\r\n [variable-declaration-30.html](https://wpt.fyi/results/css/css-variables/variable-declaration-30.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-30.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-30.html)\r\n [variable-declaration-48.html](https://wpt.fyi/results/css/css-variables/variable-declaration-48.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-48.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-48.html)\r\n [variable-declaration-49.html](https://wpt.fyi/results/css/css-variables/variable-declaration-49.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-49.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-49.html)\r\n [variable-declaration-50.html](https://wpt.fyi/results/css/css-variables/variable-declaration-50.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-50.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-50.html)\r\n [variable-reference-39.html](https://wpt.fyi/results/css/css-variables/variable-reference-39.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-39.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-39.html)\r\n \n\r\n \r\n \nNote: Defined properties that participate in a dependency cycle\r\n either end up with invalid variables in their value\r\n (becoming [invalid at computed-value time](#invalid-at-computed-value-time)),\r\n or define their own cyclic handling\r\n (like [font-size](https://www.w3.org/TR/css-fonts-4/#propdef-font-size) using [em](https://www.w3.org/TR/css-values-4/#em) values).\r\n They do not compute to the [guaranteed-invalid value](#guaranteed-invalid-value) like custom properties do.\n\r\n \r\n [](#example-75bf73fb) This example shows a custom property safely using a variable:\r\n\n```\n:root {\r\n --main-color: #c06;\r\n --accent-background: linear-gradient(to top, var(--main-color), white);\r\n}\r\n\n```\n\r\n \nThe --accent-background property\r\n (along with any other properties that use var(--main-color))\r\n will automatically update when the --main-color property is changed.\n\r\n \r\n \r\n [](#example-b8947a2b) On the other hand,\r\n this example shows an invalid instance of variables depending on each other:\r\n\n```\n:root {\r\n --one: calc(var(--two) + 20px);\r\n --two: calc(var(--one) - 20px);\r\n}\r\n\n```\n\r\n \nBoth --one and --two are now [invalid at computed-value time](#invalid-at-computed-value-time),\r\n and compute to the [guaranteed-invalid value](#guaranteed-invalid-value) rather than lengths.\n\r\n \r\n \nIt is important to note that [custom properties](#custom-property) resolve any [var()](#funcdef-var) functions in their values at computed-value time,\r\n which occurs before the value is inherited.\r\n In general,\r\n cyclic dependencies occur only when multiple custom properties on the same element refer to each other;\r\n custom properties defined on elements higher in the element tree can never cause a cyclic reference with properties defined on elements lower in the element tree.\n\r\n \r\n Tests\r\n \n\r\n [variable-declaration-51.html](https://wpt.fyi/results/css/css-variables/variable-declaration-51.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-51.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-51.html)\r\n [variable-declaration-52.html](https://wpt.fyi/results/css/css-variables/variable-declaration-52.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-52.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-52.html)\r\n \n\r\n \r\n \r\n [](#example-beef67cd) For example,\r\n given the following structure,\r\n these custom properties are not cyclic,\r\n and all define valid variables:\r\n\n```\n<one><two><three /></two></one>\r\n<style>\r\none { --foo: 10px; }\r\ntwo { --bar: calc(var(--foo) + 10px); }\r\nthree { --foo: calc(var(--bar) + 10px); }\r\n</style>\r\n\n```\n\r\n \nThe <one> element defines a value for --foo.\r\n The <two> element inherits this value,\r\n and additionally assigns a value to --bar using the foo variable.\r\n Finally,\r\n the <three> element inherits the --bar value after variable substitution\r\n (in other words, it sees the value calc(10px + 10px)),\r\n and then redefines --foo in terms of that value.\r\n Since the value it inherited for --bar no longer contains a reference to the --foo property defined on <one>,\r\n defining --foo using the var(--bar) variable is not cyclic,\r\n and actually defines a value that will eventually\r\n (when referenced as a variable in a normal property)\r\n resolve to 30px.",
      "rawLength": 63457
    },
    "using-variables": {
      "id": "using-variables",
      "heading": "3.  Using Cascading Variables: the var() notation",
      "content": "The value of a [custom property](#custom-property) can be substituted into the value of another property\r\n with the [var()](#funcdef-var) function.\r\n The syntax of var() is:\n\r\n\n```\nvar() = var( [<custom-property-name>](#typedef-custom-property-name) [,](https://www.w3.org/TR/css-values-4/#comb-comma) [<declaration-value>](https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value)[?](https://www.w3.org/TR/css-values-4/#mult-opt) )\r\n\n```\n\r\n \r\n Tests\r\n \n\r\n [variable-reference-07.html](https://wpt.fyi/results/css/css-variables/variable-reference-07.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-07.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-07.html)\r\n [variable-reference-08.html](https://wpt.fyi/results/css/css-variables/variable-reference-08.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-08.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-08.html)\r\n [variable-reference-09.html](https://wpt.fyi/results/css/css-variables/variable-reference-09.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-09.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-09.html)\r\n [variable-reference-10.html](https://wpt.fyi/results/css/css-variables/variable-reference-10.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-10.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-10.html)\r\n [variable-reference-17.html](https://wpt.fyi/results/css/css-variables/variable-reference-17.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-17.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-17.html)\r\n [variable-reference-20.html](https://wpt.fyi/results/css/css-variables/variable-reference-20.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-20.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-20.html)\r\n [variable-reference-21.html](https://wpt.fyi/results/css/css-variables/variable-reference-21.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-21.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-21.html)\r\n [variable-reference-22.html](https://wpt.fyi/results/css/css-variables/variable-reference-22.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-22.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-22.html)\r\n [variable-reference-23.html](https://wpt.fyi/results/css/css-variables/variable-reference-23.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-23.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-23.html)\r\n [variable-reference-24.html](https://wpt.fyi/results/css/css-variables/variable-reference-24.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-24.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-24.html)\r\n [variable-reference-25.html](https://wpt.fyi/results/css/css-variables/variable-reference-25.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-25.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-25.html)\r\n [variable-reference-28.html](https://wpt.fyi/results/css/css-variables/variable-reference-28.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-28.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-28.html)\r\n [variable-reference-29.html](https://wpt.fyi/results/css/css-variables/variable-reference-29.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-29.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-29.html)\r\n [variable-reference-31.html](https://wpt.fyi/results/css/css-variables/variable-reference-31.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-31.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-31.html)\r\n [variable-reference-32.html](https://wpt.fyi/results/css/css-variables/variable-reference-32.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-32.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-32.html)\r\n [variable-reference-33.html](https://wpt.fyi/results/css/css-variables/variable-reference-33.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-33.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-33.html)\r\n [variable-reference-34.html](https://wpt.fyi/results/css/css-variables/variable-reference-34.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-34.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-34.html)\r\n [variable-reference-35.html](https://wpt.fyi/results/css/css-variables/variable-reference-35.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-35.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-35.html)\r\n [variable-reference.html](https://wpt.fyi/results/css/css-variables/variable-reference.html) [(live test)](http://wpt.live/css/css-variables/variable-reference.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference.html)\r\n \n\r\n \n@supports\n\r\n \n\r\n [variable-supports-01.html](https://wpt.fyi/results/css/css-variables/variable-supports-01.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-01.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-01.html)\r\n [variable-supports-02.html](https://wpt.fyi/results/css/css-variables/variable-supports-02.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-02.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-02.html)\r\n [variable-supports-03.html](https://wpt.fyi/results/css/css-variables/variable-supports-03.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-03.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-03.html)\r\n [variable-supports-04.html](https://wpt.fyi/results/css/css-variables/variable-supports-04.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-04.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-04.html)\r\n [variable-supports-05.html](https://wpt.fyi/results/css/css-variables/variable-supports-05.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-05.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-05.html)\r\n [variable-supports-06.html](https://wpt.fyi/results/css/css-variables/variable-supports-06.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-06.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-06.html)\r\n [variable-supports-07.html](https://wpt.fyi/results/css/css-variables/variable-supports-07.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-07.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-07.html)\r\n [variable-supports-08.html](https://wpt.fyi/results/css/css-variables/variable-supports-08.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-08.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-08.html)\r\n [variable-supports-09.html](https://wpt.fyi/results/css/css-variables/variable-supports-09.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-09.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-09.html)\r\n [variable-supports-10.html](https://wpt.fyi/results/css/css-variables/variable-supports-10.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-10.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-10.html)\r\n [variable-supports-11.html](https://wpt.fyi/results/css/css-variables/variable-supports-11.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-11.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-11.html)\r\n [variable-supports-12.html](https://wpt.fyi/results/css/css-variables/variable-supports-12.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-12.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-12.html)\r\n [variable-supports-13.html](https://wpt.fyi/results/css/css-variables/variable-supports-13.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-13.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-13.html)\r\n [variable-supports-14.html](https://wpt.fyi/results/css/css-variables/variable-supports-14.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-14.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-14.html)\r\n [variable-supports-15.html](https://wpt.fyi/results/css/css-variables/variable-supports-15.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-15.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-15.html)\r\n [variable-supports-16.html](https://wpt.fyi/results/css/css-variables/variable-supports-16.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-16.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-16.html)\r\n [variable-supports-17.html](https://wpt.fyi/results/css/css-variables/variable-supports-17.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-17.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-17.html)\r\n [variable-supports-18.html](https://wpt.fyi/results/css/css-variables/variable-supports-18.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-18.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-18.html)\r\n [variable-supports-19.html](https://wpt.fyi/results/css/css-variables/variable-supports-19.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-19.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-19.html)\r\n [variable-supports-20.html](https://wpt.fyi/results/css/css-variables/variable-supports-20.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-20.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-20.html)\r\n [variable-supports-21.html](https://wpt.fyi/results/css/css-variables/variable-supports-21.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-21.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-21.html)\r\n [variable-supports-22.html](https://wpt.fyi/results/css/css-variables/variable-supports-22.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-22.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-22.html)\r\n [variable-supports-23.html](https://wpt.fyi/results/css/css-variables/variable-supports-23.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-23.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-23.html)\r\n [variable-supports-24.html](https://wpt.fyi/results/css/css-variables/variable-supports-24.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-24.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-24.html)\r\n [variable-supports-25.html](https://wpt.fyi/results/css/css-variables/variable-supports-25.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-25.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-25.html)\r\n [variable-supports-26.html](https://wpt.fyi/results/css/css-variables/variable-supports-26.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-26.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-26.html)\r\n [variable-supports-27.html](https://wpt.fyi/results/css/css-variables/variable-supports-27.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-27.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-27.html)\r\n [variable-supports-28.html](https://wpt.fyi/results/css/css-variables/variable-supports-28.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-28.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-28.html)\r\n [variable-supports-29.html](https://wpt.fyi/results/css/css-variables/variable-supports-29.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-29.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-29.html)\r\n [variable-supports-30.html](https://wpt.fyi/results/css/css-variables/variable-supports-30.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-30.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-30.html)\r\n [variable-supports-31.html](https://wpt.fyi/results/css/css-variables/variable-supports-31.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-31.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-31.html)\r\n [variable-supports-32.html](https://wpt.fyi/results/css/css-variables/variable-supports-32.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-32.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-32.html)\r\n [variable-supports-33.html](https://wpt.fyi/results/css/css-variables/variable-supports-33.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-33.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-33.html)\r\n [variable-supports-34.html](https://wpt.fyi/results/css/css-variables/variable-supports-34.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-34.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-34.html)\r\n [variable-supports-35.html](https://wpt.fyi/results/css/css-variables/variable-supports-35.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-35.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-35.html)\r\n [variable-supports-36.html](https://wpt.fyi/results/css/css-variables/variable-supports-36.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-36.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-36.html)\r\n [variable-supports-37.html](https://wpt.fyi/results/css/css-variables/variable-supports-37.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-37.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-37.html)\r\n [variable-supports-38.html](https://wpt.fyi/results/css/css-variables/variable-supports-38.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-38.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-38.html)\r\n [variable-supports-39.html](https://wpt.fyi/results/css/css-variables/variable-supports-39.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-39.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-39.html)\r\n [variable-supports-40.html](https://wpt.fyi/results/css/css-variables/variable-supports-40.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-40.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-40.html)\r\n [variable-supports-41.html](https://wpt.fyi/results/css/css-variables/variable-supports-41.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-41.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-41.html)\r\n [variable-supports-42.html](https://wpt.fyi/results/css/css-variables/variable-supports-42.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-42.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-42.html)\r\n [variable-supports-43.html](https://wpt.fyi/results/css/css-variables/variable-supports-43.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-43.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-43.html)\r\n [variable-supports-44.html](https://wpt.fyi/results/css/css-variables/variable-supports-44.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-44.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-44.html)\r\n [variable-supports-45.html](https://wpt.fyi/results/css/css-variables/variable-supports-45.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-45.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-45.html)\r\n [variable-supports-46.html](https://wpt.fyi/results/css/css-variables/variable-supports-46.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-46.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-46.html)\r\n [variable-supports-47.html](https://wpt.fyi/results/css/css-variables/variable-supports-47.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-47.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-47.html)\r\n [variable-supports-48.html](https://wpt.fyi/results/css/css-variables/variable-supports-48.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-48.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-48.html)\r\n [variable-supports-49.html](https://wpt.fyi/results/css/css-variables/variable-supports-49.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-49.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-49.html)\r\n [variable-supports-50.html](https://wpt.fyi/results/css/css-variables/variable-supports-50.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-50.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-50.html)\r\n [variable-supports-51.html](https://wpt.fyi/results/css/css-variables/variable-supports-51.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-51.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-51.html)\r\n [variable-supports-52.html](https://wpt.fyi/results/css/css-variables/variable-supports-52.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-52.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-52.html)\r\n [variable-supports-53.html](https://wpt.fyi/results/css/css-variables/variable-supports-53.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-53.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-53.html)\r\n [variable-supports-54.html](https://wpt.fyi/results/css/css-variables/variable-supports-54.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-54.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-54.html)\r\n [variable-supports-55.html](https://wpt.fyi/results/css/css-variables/variable-supports-55.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-55.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-55.html)\r\n [variable-supports-56.html](https://wpt.fyi/results/css/css-variables/variable-supports-56.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-56.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-56.html)\r\n [variable-supports-57.html](https://wpt.fyi/results/css/css-variables/variable-supports-57.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-57.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-57.html)\r\n [variable-supports-58.html](https://wpt.fyi/results/css/css-variables/variable-supports-58.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-58.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-58.html)\r\n [variable-supports-59.html](https://wpt.fyi/results/css/css-variables/variable-supports-59.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-59.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-59.html)\r\n [variable-supports-60.html](https://wpt.fyi/results/css/css-variables/variable-supports-60.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-60.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-60.html)\r\n [variable-supports-61.html](https://wpt.fyi/results/css/css-variables/variable-supports-61.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-61.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-61.html)\r\n [variable-supports-62.html](https://wpt.fyi/results/css/css-variables/variable-supports-62.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-62.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-62.html)\r\n [variable-supports-63.html](https://wpt.fyi/results/css/css-variables/variable-supports-63.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-63.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-63.html)\r\n [variable-supports-64.html](https://wpt.fyi/results/css/css-variables/variable-supports-64.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-64.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-64.html)\r\n [variable-supports-65.html](https://wpt.fyi/results/css/css-variables/variable-supports-65.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-65.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-65.html)\r\n [variable-supports-66.html](https://wpt.fyi/results/css/css-variables/variable-supports-66.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-66.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-66.html)\r\n [variable-supports-67.html](https://wpt.fyi/results/css/css-variables/variable-supports-67.html) [(live test)](http://wpt.live/css/css-variables/variable-supports-67.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-supports-67.html)\r\n \n\r\n \r\n \r\n \nIn an exception to the usual [comma elision rules](https://www.w3.org/TR/css-values-4/#comb-comma),\r\n which require commas to be omitted when they’re not separating values,\r\n a bare comma, with nothing following it,\r\n must be treated as valid in [var()](#funcdef-var),\r\n indicating an empty fallback value.\n\r\n \r\n Tests\r\n \n\r\n [variable-declaration-07.html](https://wpt.fyi/results/css/css-variables/variable-declaration-07.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-07.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-07.html)\r\n [variable-declaration-37.html](https://wpt.fyi/results/css/css-variables/variable-declaration-37.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-37.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-37.html)\r\n [variable-reference-06.html](https://wpt.fyi/results/css/css-variables/variable-reference-06.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-06.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-06.html)\r\n [variable-reference-11.html](https://wpt.fyi/results/css/css-variables/variable-reference-11.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-11.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-11.html)\r\n [variable-reference-26.html](https://wpt.fyi/results/css/css-variables/variable-reference-26.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-26.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-26.html)\r\n [variable-reference-27.html](https://wpt.fyi/results/css/css-variables/variable-reference-27.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-27.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-27.html)\r\n \n\r\n \r\n \nNote: That is, var(--a,) is a valid function,\r\n specifying that if the --a custom property is invalid or missing,\r\n the [var()](#funcdef-var) should be replaced with nothing.\n\r\n \nThe [var()](#funcdef-var) function can be used in place of any part of a value in any property on an element.\r\n The var() function can not be used as\r\n property names,\r\n selectors,\r\n or anything else besides property values.\r\n (Doing so usually produces invalid syntax,\r\n or else a value whose meaning has no connection to the variable.)\n\r\n \r\n Tests\r\n \n\r\n [variable-external-font-face-01.html](https://wpt.fyi/results/css/css-variables/variable-external-font-face-01.html) [(live test)](http://wpt.live/css/css-variables/variable-external-font-face-01.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-external-font-face-01.html)\r\n [variable-font-face-01.html](https://wpt.fyi/results/css/css-variables/variable-font-face-01.html) [(live test)](http://wpt.live/css/css-variables/variable-font-face-01.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-font-face-01.html)\r\n [variable-font-face-02.html](https://wpt.fyi/results/css/css-variables/variable-font-face-02.html) [(live test)](http://wpt.live/css/css-variables/variable-font-face-02.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-font-face-02.html)\r\n \n\r\n \r\n \r\n [](#example-43a8c543) For example, the following code incorrectly attempts to use a variable as a property name:\r\n\n```\n.foo {\r\n --side: margin-top;\r\n var(--side): 20px;\r\n}\r\n\n```\n\r\n \nThis is not equivalent to setting [margin-top: 20px;](https://www.w3.org/TR/css-box-4/#propdef-margin-top).\r\n Instead, the second declaration is simply thrown away as a syntax error\r\n for having an invalid property name.\n\r\n \r\n \nThe first argument to the function is the name of the [custom property](#custom-property) to be substituted.\r\n The second argument to the function, if provided,\r\n is a fallback value,\r\n which is used as the substitution value when the value of the referenced custom property is the [guaranteed-invalid value](#guaranteed-invalid-value).\n\r\n \r\n Tests\r\n \n\r\n [variable-declaration-08.html](https://wpt.fyi/results/css/css-variables/variable-declaration-08.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-08.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-08.html)\r\n [variable-declaration-09.html](https://wpt.fyi/results/css/css-variables/variable-declaration-09.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-09.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-09.html)\r\n [variable-declaration-10.html](https://wpt.fyi/results/css/css-variables/variable-declaration-10.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-10.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-10.html)\r\n [variable-declaration-11.html](https://wpt.fyi/results/css/css-variables/variable-declaration-11.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-11.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-11.html)\r\n [variable-declaration-12.html](https://wpt.fyi/results/css/css-variables/variable-declaration-12.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-12.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-12.html)\r\n [variable-declaration-13.html](https://wpt.fyi/results/css/css-variables/variable-declaration-13.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-13.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-13.html)\r\n [variable-declaration-22.html](https://wpt.fyi/results/css/css-variables/variable-declaration-22.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-22.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-22.html)\r\n \n\r\n \r\n \nNote: The syntax of the fallback, like that of [custom properties](#custom-property), allows commas.\r\n For example, var(--foo, red, blue) defines a fallback of red, blue;\r\n that is, anything between the first comma and the end of the function is considered a fallback value.\n\r\n \r\n [](#example-abd63bac) The fallback value allows for some types of defensive coding.\r\n For example,\r\n an author may create a component\r\n intended to be included in a larger application,\r\n and use variables to style it\r\n so that it’s easy for the author of the larger application\r\n to theme the component to match the rest of the app.\r\n \nWithout fallback,\r\n the app author must supply a value for every variable that your component uses.\r\n With fallback, the component author can supply defaults,\r\n so the app author only needs to supply values for the variables they wish to override.\n\r\n\n```\n/* In the component’s style: */\r\n.component .header {\r\n color: var(--header-color, blue);\r\n}\r\n.component .text {\r\n color: var(--text-color, black);\r\n}\r\n\r\n/* In the larger application’s style: */\r\n.component {\r\n --text-color: #080;\r\n /* header-color isn’t set,\r\n and so remains blue,\r\n the fallback value */\r\n}\r\n\n```\n\r\n \r\n \nIf a property contains one or more [var()](#funcdef-var) functions,\r\n and those functions are syntactically valid,\r\n the entire property’s grammar must be assumed to be valid at parse time.\r\n It is only syntax-checked at computed-value time,\r\n after var() functions have been [substituted](#substitute-a-var).\n\r\n \r\n Tests\r\n \n\r\n [variable-reference-18.html](https://wpt.fyi/results/css/css-variables/variable-reference-18.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-18.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-18.html)\r\n [variable-reference-19.html](https://wpt.fyi/results/css/css-variables/variable-reference-19.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-19.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-19.html)\r\n [variable-reference-30.html](https://wpt.fyi/results/css/css-variables/variable-reference-30.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-30.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-30.html)\r\n \n\r\n \r\n \nTo **substitute a var()** in a property’s value:\n\r\n \n\r\n If the [custom property](#custom-property) named by the first argument to the [var()](#funcdef-var) function is [animation-tainted](#animation-tainted),\r\n and the var() function is being used in a property that is [not animatable](https://www.w3.org/TR/web-animations-1/#not-animatable),\r\n treat the custom property as having its initial value for the rest of this algorithm.\r\n If the value of the [custom property](#custom-property) named by the first argument to the [var()](#funcdef-var) function\r\n is anything but the initial value,\r\n replace the var() function by the value of the corresponding custom property.\r\n Otherwise, if the [var()](#funcdef-var) function has a fallback value as its second argument,\r\n replace the var() function by the fallback value.\r\n If there are any var() references in the fallback, [substitute](#substitute-a-var) them as well.\r\n \r\n Otherwise,\r\n the property containing the [var()](#funcdef-var) function is [invalid at computed-value time](#invalid-at-computed-value-time).\r\n \nNote: Other things can also make a property [invalid at computed-value time](#invalid-at-computed-value-time).\n\r\n \n\r\n \r\n Tests\r\n \n\r\n [css-variable-change-style-001.html](https://wpt.fyi/results/css/css-variables/css-variable-change-style-001.html) [(live test)](http://wpt.live/css/css-variables/css-variable-change-style-001.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/css-variable-change-style-001.html)\r\n [css-variable-change-style-002.html](https://wpt.fyi/results/css/css-variables/css-variable-change-style-002.html) [(live test)](http://wpt.live/css/css-variables/css-variable-change-style-002.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/css-variable-change-style-002.html)\r\n [variable-declaration-01.html](https://wpt.fyi/results/css/css-variables/variable-declaration-01.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-01.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-01.html)\r\n [variable-declaration-02.html](https://wpt.fyi/results/css/css-variables/variable-declaration-02.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-02.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-02.html)\r\n [variable-declaration-03.html](https://wpt.fyi/results/css/css-variables/variable-declaration-03.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-03.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-03.html)\r\n [variable-declaration-04.html](https://wpt.fyi/results/css/css-variables/variable-declaration-04.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-04.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-04.html)\r\n [variable-declaration-05.html](https://wpt.fyi/results/css/css-variables/variable-declaration-05.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-05.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-05.html)\r\n [variable-generated-content-dynamic-001.html](https://wpt.fyi/results/css/css-variables/variable-generated-content-dynamic-001.html) [(live test)](http://wpt.live/css/css-variables/variable-generated-content-dynamic-001.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-generated-content-dynamic-001.html)\r\n [variable-presentation-attribute.html](https://wpt.fyi/results/css/css-variables/variable-presentation-attribute.html) [(live test)](http://wpt.live/css/css-variables/variable-presentation-attribute.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-presentation-attribute.html)\r\n [variable-reference-01.html](https://wpt.fyi/results/css/css-variables/variable-reference-01.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-01.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-01.html)\r\n [variable-reference-02.html](https://wpt.fyi/results/css/css-variables/variable-reference-02.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-02.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-02.html)\r\n [variable-reference-03.html](https://wpt.fyi/results/css/css-variables/variable-reference-03.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-03.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-03.html)\r\n [variable-reference-04.html](https://wpt.fyi/results/css/css-variables/variable-reference-04.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-04.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-04.html)\r\n [variable-reference-05.html](https://wpt.fyi/results/css/css-variables/variable-reference-05.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-05.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-05.html)\r\n [variable-reference-12.html](https://wpt.fyi/results/css/css-variables/variable-reference-12.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-12.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-12.html)\r\n [variable-reference-16.html](https://wpt.fyi/results/css/css-variables/variable-reference-16.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-16.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-16.html)\r\n [variable-reference-40.html](https://wpt.fyi/results/css/css-variables/variable-reference-40.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-40.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-40.html)\r\n [variable-reference-refresh.html](https://wpt.fyi/results/css/css-variables/variable-reference-refresh.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-refresh.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-refresh.html)\r\n [variable-substitution-background-properties.html](https://wpt.fyi/results/css/css-variables/variable-substitution-background-properties.html) [(live test)](http://wpt.live/css/css-variables/variable-substitution-background-properties.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-substitution-background-properties.html)\r\n [variable-substitution-basic.html](https://wpt.fyi/results/css/css-variables/variable-substitution-basic.html) [(live test)](http://wpt.live/css/css-variables/variable-substitution-basic.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-substitution-basic.html)\r\n [variable-substitution-filters.html](https://wpt.fyi/results/css/css-variables/variable-substitution-filters.html) [(live test)](http://wpt.live/css/css-variables/variable-substitution-filters.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-substitution-filters.html)\r\n [variable-substitution-replaced-size.html](https://wpt.fyi/results/css/css-variables/variable-substitution-replaced-size.html) [(live test)](http://wpt.live/css/css-variables/variable-substitution-replaced-size.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-substitution-replaced-size.html)\r\n [variable-substitution-shadow-properties.html](https://wpt.fyi/results/css/css-variables/variable-substitution-shadow-properties.html) [(live test)](http://wpt.live/css/css-variables/variable-substitution-shadow-properties.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-substitution-shadow-properties.html)\r\n [variable-substitution-variable-declaration.html](https://wpt.fyi/results/css/css-variables/variable-substitution-variable-declaration.html) [(live test)](http://wpt.live/css/css-variables/variable-substitution-variable-declaration.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-substitution-variable-declaration.html)\r\n \n\r\n \nCSSOM\n\r\n \n\r\n [variable-reference-cssom.html](https://wpt.fyi/results/css/css-variables/variable-reference-cssom.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-cssom.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-cssom.html)\r\n \n\r\n \r\n \r\n \r\n Note that [var() substitution](#substitute-a-var) takes place at the level of CSS tokens [[css-syntax-3]](#biblio-css-syntax-3),\r\n not at a textual level;\r\n you can’t build up a single token where part of it is provided by a variable:\r\n\n```\n.foo {\r\n --gap: 20;\r\n margin-top: var(--gap)px;\r\n}\r\n\n```\n\r\n \nThis is not equivalent to setting [margin-top: 20px;](https://www.w3.org/TR/css-box-4/#propdef-margin-top) (a length).\r\n Instead, it’s equivalent to margin-top: 20 px; (a number followed by an ident),\r\n which is simply an invalid value for the margin-top property.\r\n Note, though, that [calc()](https://www.w3.org/TR/css-values-4/#funcdef-calc) can be used to validly achieve the same thing, like so:\n\r\n\n```\n.foo {\r\n --gap: 20;\r\n margin-top: calc(var(--gap) * 1px);\r\n}\r\n\n```\n\r\n \r\n \r\n Tests\r\n \n\r\n [variable-declaration-14.html](https://wpt.fyi/results/css/css-variables/variable-declaration-14.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-14.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-14.html)\r\n [variable-declaration-53.html](https://wpt.fyi/results/css/css-variables/variable-declaration-53.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-53.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-53.html)\r\n [variable-declaration-54.html](https://wpt.fyi/results/css/css-variables/variable-declaration-54.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-54.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-54.html)\r\n [variable-declaration-55.html](https://wpt.fyi/results/css/css-variables/variable-declaration-55.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-55.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-55.html)\r\n [variable-reference-15.html](https://wpt.fyi/results/css/css-variables/variable-reference-15.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-15.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-15.html)\r\n [variable-reference-without-whitespace.html](https://wpt.fyi/results/css/css-variables/variable-reference-without-whitespace.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-without-whitespace.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-without-whitespace.html)\r\n \n\r\n \r\n \n[var()](#funcdef-var) functions are [substituted](#substitute-a-var) at computed-value time.\r\n If a declaration,\r\n once all var() functions are substituted in,\r\n does not match its declared grammar,\r\n the declaration is [invalid at computed-value time](#invalid-at-computed-value-time).\n\r\n \r\n Tests\r\n \n\r\n [variable-declaration-16.html](https://wpt.fyi/results/css/css-variables/variable-declaration-16.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-16.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-16.html)\r\n [variable-declaration-17.html](https://wpt.fyi/results/css/css-variables/variable-declaration-17.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-17.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-17.html)\r\n [variable-declaration-18.html](https://wpt.fyi/results/css/css-variables/variable-declaration-18.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-18.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-18.html)\r\n [variable-declaration-19.html](https://wpt.fyi/results/css/css-variables/variable-declaration-19.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-19.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-19.html)\r\n [variable-declaration-21.html](https://wpt.fyi/results/css/css-variables/variable-declaration-21.html) [(live test)](http://wpt.live/css/css-variables/variable-declaration-21.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-declaration-21.html)\r\n [variable-transitions-transition-property-all-before-value.html](https://wpt.fyi/results/css/css-variables/variable-transitions-transition-property-all-before-value.html) [(live test)](http://wpt.live/css/css-variables/variable-transitions-transition-property-all-before-value.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-transitions-transition-property-all-before-value.html)\r\n [variable-transitions-value-before-transition-property-all.html](https://wpt.fyi/results/css/css-variables/variable-transitions-value-before-transition-property-all.html) [(live test)](http://wpt.live/css/css-variables/variable-transitions-value-before-transition-property-all.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-transitions-value-before-transition-property-all.html)\r\n \n\r\n \r\n \nIf a declaration,\r\n once all [var()](#funcdef-var) functions are substituted in,\r\n contains only a [CSS-wide keyword](https://www.w3.org/TR/css-values-4/#css-wide-keywords) (and possibly whitespace),\r\n its value is determined as if that keyword were its [specified value](https://www.w3.org/TR/css-cascade-5/#specified-value) all along.\n\r\n \r\n Tests\r\n \n\r\n [wide-keyword-fallback.html](https://wpt.fyi/results/css/css-variables/wide-keyword-fallback.html) [(live test)](http://wpt.live/css/css-variables/wide-keyword-fallback.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/wide-keyword-fallback.html)\r\n \n\r\n \r\n \r\n [](#example-6ec8308f) For example,\r\n the following usage is fine from a syntax standpoint,\r\n but results in nonsense when the variable is substituted in:\r\n\n```\n:root { --looks-valid: 20px; }\r\np { background-color: var(--looks-valid); }\r\n\n```\n\r\n \nSince 20px is an invalid value for [background-color](https://www.w3.org/TR/css-backgrounds-3/#propdef-background-color),\r\n this instance of the property computes to [transparent](https://www.w3.org/TR/css-color-4/#valdef-color-transparent) (the initial value for background-color)\r\n instead.\n\r\n \nIf the property was one that’s inherited by default,\r\n such as [color](https://www.w3.org/TR/css-color-4/#propdef-color),\r\n it would compute to the inherited value\r\n rather than the initial value.\n\r\n \r\n \r\n [](#example-ee865e1b) While a [var()](#funcdef-var) function can’t get a [CSS-wide keyword](https://www.w3.org/TR/css-values-4/#css-wide-keywords) from the [custom property](#custom-property) itself—if you tried to specify that,\r\n like --foo: initial;,\r\n it would just trigger [explicit defaulting](https://www.w3.org/TR/css-cascade-4/#defaulting-keywords) for the custom property—it can have a CSS-wide keyword in its fallback:\r\n\n```\np { color: var(--does-not-exist, initial); }\r\n\n```\n\r\n \nIn the above code, if the --does-not-exist property didn’t exist\r\n or is [invalid at computed-value time](#invalid-at-computed-value-time),\r\n the [var()](#funcdef-var) will instead substitute in the [initial](https://www.w3.org/TR/css-cascade-5/#valdef-all-initial) keyword,\r\n making the property behave as if it was originally [color: initial](https://www.w3.org/TR/css-color-4/#propdef-color).\r\n This will make it take on the document’s initial color value,\r\n rather than defaulting to inheritance,\r\n as it would if there were no fallback.\n\r\n \r\n 3.1. Invalid Variables[](#invalid-variables)\r\n \nWhen a [custom property’s](#custom-property) value is the [guaranteed-invalid value](#guaranteed-invalid-value), [var()](#funcdef-var) functions cannot use it for substitution.\r\n Attempting to do so\r\n makes the declaration [invalid at computed-value time](#invalid-at-computed-value-time),\r\n unless a valid fallback is specified.\n\r\n \nA declaration can be **invalid at computed-value time** if it contains a [var()](#funcdef-var) that references a [custom property](#custom-property) with the [guaranteed-invalid value](#guaranteed-invalid-value),\r\n as explained above,\r\n or if it uses a valid custom property,\r\n but the property value,\r\n after substituting its var() functions,\r\n is invalid.\r\n When this happens,\r\n the computed value is one of the following\r\n depending on the property’s type:\n\r\n \r\n The property is a non-registered [custom property](#custom-property)\r\n The property is a [registered custom property](https://drafts.css-houdini.org/css-properties-values-api-1/#registered-custom-property) with [universal syntax](https://drafts.css-houdini.org/css-properties-values-api-1/#universal-syntax-definition)\r\n \r\n \nThe computed value is the [guaranteed-invalid value](#guaranteed-invalid-value).\n\r\n Otherwise\r\n \r\n \nEither the property’s inherited value\r\nor its initial value\r\ndepending on whether the property is inherited or not, respectively,\r\nas if the property’s value had been specified as the [unset](https://www.w3.org/TR/css-cascade-5/#valdef-all-unset) keyword.\n\r\n \r\n \r\n Tests\r\n \n\r\n [variables-substitute-guaranteed-invalid.html](https://wpt.fyi/results/css/css-variables/variables-substitute-guaranteed-invalid.html) [(live test)](http://wpt.live/css/css-variables/variables-substitute-guaranteed-invalid.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variables-substitute-guaranteed-invalid.html)\r\n \n\r\n \r\n \r\n [](#example-53e4f9d5) For example, in the following code:\r\n\n```\n:root { --not-a-color: 20px; }\r\np { background-color: red; }\r\np { background-color: var(--not-a-color); }\r\n\n```\n\r\n \nthe <p> elements will have transparent backgrounds\r\n (the initial value for [background-color](https://www.w3.org/TR/css-backgrounds-3/#propdef-background-color)),\r\n rather than red backgrounds.\r\n The same would happen if the [custom property](#custom-property) itself was unset,\r\n or contained an invalid [var()](#funcdef-var) function.\n\r\n \nNote the difference between this\r\n and what happens if the author had just written [background-color: 20px](https://www.w3.org/TR/css-backgrounds-3/#propdef-background-color) directly in their stylesheet -\r\n that would be a normal syntax error,\r\n which would cause the rule to be discarded,\r\n so the background-color: red rule would be used instead.\n\r\n \r\n \nNote: The [invalid at computed-value time](#invalid-at-computed-value-time) concept exists\r\n because variables can’t \"fail early\" like other syntax errors can,\r\n so by the time the user agent realizes a property value is invalid,\r\n it’s already thrown away the other cascaded values.\n\r\n 3.2. Variables in Shorthand Properties[](#variables-in-shorthands)\r\n \n[var()](#funcdef-var) functions produce some complications\r\n when parsing [shorthand properties](https://www.w3.org/TR/css-cascade-5/#shorthand-property) into their component longhands,\r\n and when serializing shorthand properties from their component longhands.\n\r\n \nIf a [shorthand property](https://www.w3.org/TR/css-cascade-5/#shorthand-property) contains a [var()](#funcdef-var) function in its value,\r\n the [longhand properties](https://www.w3.org/TR/css-cascade-5/#longhand) it’s associated with must instead be filled in\r\n with a special, unobservable-to-authors **pending-substitution value** that indicates the shorthand contains a variable,\r\n and thus the longhand’s value can’t be determined until variables are [substituted](#substitute-a-var).\n\r\n \nThis value must then be cascaded as normal,\r\n and at computed-value time,\r\n after [var()](#funcdef-var) functions are finally substituted in,\r\n the shorthand must be parsed and the longhands must be given their appropriate values at that point.\n\r\n \r\n Tests\r\n \n\r\n [variable-reference-36.html](https://wpt.fyi/results/css/css-variables/variable-reference-36.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-36.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-36.html)\r\n [variable-reference-37.html](https://wpt.fyi/results/css/css-variables/variable-reference-37.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-37.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-37.html)\r\n [variable-reference-38.html](https://wpt.fyi/results/css/css-variables/variable-reference-38.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-38.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-38.html)\r\n [variable-substitution-shorthands.html](https://wpt.fyi/results/css/css-variables/variable-substitution-shorthands.html) [(live test)](http://wpt.live/css/css-variables/variable-substitution-shorthands.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-substitution-shorthands.html)\r\n [vars-background-shorthand-001.html](https://wpt.fyi/results/css/css-variables/vars-background-shorthand-001.html) [(live test)](http://wpt.live/css/css-variables/vars-background-shorthand-001.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/vars-background-shorthand-001.html)\r\n [vars-font-shorthand-001.html](https://wpt.fyi/results/css/css-variables/vars-font-shorthand-001.html) [(live test)](http://wpt.live/css/css-variables/vars-font-shorthand-001.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/vars-font-shorthand-001.html)\r\n \n\r\n \r\n \nNote: When a shorthand is written without a [var()](#funcdef-var),\r\n it is parsed and separated out into its component [longhand properties](https://www.w3.org/TR/css-cascade-5/#longhand) at parse time;\r\n the longhands then participate in the [cascade](https://www.w3.org/TR/css-cascade-6/#cascade),\r\n with the [shorthand property](https://www.w3.org/TR/css-cascade-5/#shorthand-property) more or less discarded.\r\n When the shorthand contains a var(), however,\r\n this can’t be done,\r\n as the var() could be substituted with anything.\n\r\n \n[Pending-substitution values](#pending-substitution-value) must be serialized as the empty string,\r\n if an API allows them to be observed.\n\r\n \r\n Tests\r\n \n\r\n [variable-definition-border-shorthand-serialize.html](https://wpt.fyi/results/css/css-variables/variable-definition-border-shorthand-serialize.html) [(live test)](http://wpt.live/css/css-variables/variable-definition-border-shorthand-serialize.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-definition-border-shorthand-serialize.html)\r\n [vars-border-shorthand-serialize.html](https://wpt.fyi/results/css/css-variables/vars-border-shorthand-serialize.html) [(live test)](http://wpt.live/css/css-variables/vars-border-shorthand-serialize.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/vars-border-shorthand-serialize.html)\r\n \n\r\n \r\n \r\n \n[Shorthand properties](https://www.w3.org/TR/css-cascade-5/#shorthand-property) are serialized\r\n by gathering the values of their component [longhand properties](https://www.w3.org/TR/css-cascade-5/#longhand),\r\n and synthesizing a value\r\n that will parse into the same set of values.\n\r\n \nIf all of the component [longhand properties](https://www.w3.org/TR/css-cascade-5/#longhand) for a given [shorthand](https://www.w3.org/TR/css-cascade-5/#shorthand-property) are [pending-substitution values](#pending-substitution-value) from the same original shorthand value,\r\n the shorthand property must serialize to that original\r\n ([var()](#funcdef-var)-containing)\r\n value.\n\r\n \nOtherwise,\r\n if any of the component [longhand properties](https://www.w3.org/TR/css-cascade-5/#longhand) for a given [shorthand](https://www.w3.org/TR/css-cascade-5/#shorthand-property) are [pending-substitution values](#pending-substitution-value),\r\n or contain [var()](#funcdef-var) functions of their own that have not yet been substituted,\r\n the shorthand property must serialize to the empty string.\n\r\n 3.3. Safely Handling Overly-Long Variables[](#long-variables)\r\n \nNaively implemented, [var()](#funcdef-var) functions can be used in a variation of the \"billion laughs attack\":\n\r\n \r\n [](#example-9c9258de)\r\n\n```\n.foo {\r\n --prop1: lol;\r\n --prop2: var(--prop1) var(--prop1);\r\n --prop3: var(--prop2) var(--prop2);\r\n --prop4: var(--prop3) var(--prop3);\r\n /* etc */\r\n}\r\n\n```\n\r\n \nIn this short example, --prop4’s computed value is lol lol lol lol lol lol lol lol,\r\n containing 8 copies of the original lol.\r\n Every additional level added to this doubles the number of identifiers;\r\n extending it to a mere 30 levels,\r\n the work of a few minutes by hand,\r\n would make --prop30 contain nearly a billion instances of the identifier.\n\r\n \r\n \nTo avoid this sort of attack,\r\n UAs must impose a UA-defined limit on the allowed length of the token stream\r\n that a [var()](#funcdef-var) function expands into.\r\n If a var() would expand into a longer token stream than this limit,\r\n it instead makes the property it’s expanding into [invalid at computed-value time](#invalid-at-computed-value-time).\n\r\n \r\n Tests\r\n \n\r\n [variable-exponential-blowup.html](https://wpt.fyi/results/css/css-variables/variable-exponential-blowup.html) [(live test)](http://wpt.live/css/css-variables/variable-exponential-blowup.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-exponential-blowup.html)\r\n \n\r\n \r\n \nThis specification does not define what size limit should be imposed.\r\n However, since there are valid use-cases for custom properties that contain a kilobyte or more of text,\r\n it’s recommended that the limit be set relatively high.\n\r\n \nNote: The general principle that UAs are allowed to violate standards due to resource constraints\r\n is still generally true here;\r\n a UA might, separately, have limits on how long of a custom property they can support,\r\n or how large of an identifier they can support.\r\n This section calls out this attack specifically\r\n because of its long history,\r\n and the fact that it can be done without any of the pieces seeming to be too large on first inspection.",
      "rawLength": 104896
    },
    "apis": {
      "id": "apis",
      "heading": "4.  APIs",
      "content": "All [custom property](#custom-property) [declarations](https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations) have the [case-sensitive flag](https://www.w3.org/TR/cssom-1/#css-declaration-case-sensitive-flag) set.\n\r\n \r\n Tests\r\n \n\r\n [variable-definition.html](https://wpt.fyi/results/css/css-variables/variable-definition.html) [(live test)](http://wpt.live/css/css-variables/variable-definition.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-definition.html)\r\n [variable-invalidation.html](https://wpt.fyi/results/css/css-variables/variable-invalidation.html) [(live test)](http://wpt.live/css/css-variables/variable-invalidation.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-invalidation.html)\r\n \n\r\n \r\n \nNote: Custom properties do not appear on a CSSStyleDeclaration object in camel-cased form,\r\n because their names may have both upper and lower case letters\r\n which indicate distinct custom properties.\r\n The sort of text transformation that automatic camel-casing performs is incompatible with this.\r\n They can still be accessed by their proper name via [getPropertyValue()](https://www.w3.org/TR/cssom-1/#dom-cssstyledeclaration-getpropertyvalue)/etc.\n\r\n 4.1. Serializing Custom Properties[](#serializing-custom-props)\r\n \nCustom property names must be serialized\r\n as the exact code point sequence provided by the author,\r\n including not altering the case.\n\r\n \nNote: For non-custom properties,\r\n property names are restricted to the ASCII range and are [ASCII case-insensitive](https://infra.spec.whatwg.org/#ascii-case-insensitive),\r\n so implementations typically serialize the name lowercased.\n\r\n \nSpecified values of [custom properties](#custom-property) must be serialized exactly as specified by the author.\r\n Simplifications that might occur in other properties,\r\n such as dropping comments,\r\n normalizing whitespace,\r\n reserializing numeric tokens from their value,\r\n etc.,\r\n must not occur.\n\r\n \nComputed values of [custom properties](#custom-property) must similarly be serialized exactly as specified by the author,\r\n save for the replacement of any [var()](#funcdef-var) functions.\n\r\n \r\n Tests\r\n \n\r\n [variable-reference-shorthands-cssom.html](https://wpt.fyi/results/css/css-variables/variable-reference-shorthands-cssom.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-shorthands-cssom.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-shorthands-cssom.html)\r\n [variable-reference-variable.html](https://wpt.fyi/results/css/css-variables/variable-reference-variable.html) [(live test)](http://wpt.live/css/css-variables/variable-reference-variable.html) [(source)](https://github.com/web-platform-tests/wpt/blob/master/css/css-variables/variable-reference-variable.html)\r\n \n\r\n \r\n \r\n [](#example-55f61182) For example, given the following properties:\r\n\n```\n--y: /* baz */;\r\n--x: /* foo */ var(--y) /* bar */;\r\n\n```\n\r\n \nthe serialization of the specified value of --x must be \"/* foo */ var(--y) /* bar */\",\r\n while the serialization of the computed value of --x must be \"/* foo */ /* baz */ /* bar */\".\n\r\n \n(Note that the leading whitespace on the value is automatically trimmed by the CSS parser;\r\n it’s not preserved here.)\n\r\n \r\n \r\n This requirement exists because authors sometimes store non-CSS information in custom properties,\r\n and \"normalizing\" this information can change it in ways that break author code.\r\n \nFor example, storing a UUID in a custom property,\r\n like --uuid: 12345678-12e3-8d9b-a456-426614174000,\r\n requires the UUID to be echoed back out as written\r\n when it’s accessed by script.\n\r\n \nThis value is technically parsed by CSS as a series of adjacent numbers and dimensions.\r\n In particular, the segment \"-12e3\" parses as a number, equal to -12000.\r\n Reserializing it in that form,\r\n as required by CSSOM in other contexts,\r\n would fatally break the author’s use of the value.",
      "rawLength": 6469
    },
    "acks": {
      "id": "acks",
      "heading": "6.  Acknowledgments",
      "content": "Many thanks to several people in the CSS Working Group for keeping the dream of variables alive over the years,\r\n particularly Daniel Glazman and David Hyatt.\r\n Thanks to multiple people on the mailing list for helping contribute to the development of this incarnation of variables,\r\n particularly\r\n Brian Kardell,\r\n David Baron,\r\n François Remy,\r\n Roland Steiner,\r\n and Shane Stephens.",
      "rawLength": 403
    },
    "privacy": {
      "id": "privacy",
      "heading": "7. Privacy Considerations",
      "content": "This specification defines a purely author-level mechanism for passing styling information around within a page they control.\r\nAs such, there are no new privacy considerations.",
      "rawLength": 193
    },
    "security": {
      "id": "security",
      "heading": "8. Security Considerations",
      "content": "[§ 3.3 Safely Handling Overly-Long Variables](#long-variables) calls out a long-standing Denial-of-Service attack\r\nthat can be mounted against \"macro-expansion\"-like mechanisms,\r\nsuch as the [var()](#funcdef-var) function,\r\nand mandates a defense against that attack.",
      "rawLength": 378
    }
  }
}